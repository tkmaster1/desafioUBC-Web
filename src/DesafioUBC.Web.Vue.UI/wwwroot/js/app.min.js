/*
Template Name: ASPSTUDIO - Responsive Bootstrap 5 Admin Template
Version: 3.3.0
Author: Sean Ngu
	----------------------------
		APPS CONTENT TABLE
	----------------------------

	<!-- ======== GLOBAL SCRIPT SETTING ======== -->
  01. Global Variable
  02. Handle Scrollbar
  03. Handle Sidebar Menu
  04. Handle Sidebar Minify
  05. Handle Sidebar Minify Float Menu
  06. Handle Dropdown Close Option
  07. Handle Card - Remove / Reload / Collapse / Expand
  08. Handle Tooltip & Popover Activation
  09. Handle Scroll to Top Button Activation
  10. Handle hexToRgba
  11. Handle Scroll to
  12. Handle Theme Panel Expand
  13. Handle Theme Page Control
  14. Handle Enable Tooltip & Popover
	
	<!-- ======== APPLICATION SETTING ======== -->
	Application Controller
*/



/* 01. Global Variable
------------------------------------------------ */
var app = {
	class: 'app',
	isMobile: ((/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) || window.innerWidth < 992),
	header: {
		class: 'app-header'
	},
	sidebar: {
		class: 'app-sidebar',
		menuClass: 'menu',
		menuItemClass: 'menu-item',
		menuItemHasSubClass: 'has-sub',
		menuLinkClass: 'menu-link',
		menuSubmenuClass: 'menu-submenu',
		menuExpandClass: 'expand',
		minify: {
			toggledClass: 'app-sidebar-minified',
			localStorage: 'appSidebarMinified',
			toggleAttr: 'data-toggle="sidebar-minify"'
		},
		mobile: {
			toggledClass: 'app-sidebar-mobile-toggled',
			closedClass: 'app-sidebar-mobile-closed',
			dismissAttr: 'data-dismiss="sidebar-mobile"',
			toggleAttr: 'data-toggle="sidebar-mobile"',
		},
		scrollBar: {
			localStorage: 'appSidebarScrollPosition',
			dom: '',
		}
	},
	floatSubmenu: {
		id: 'app-float-submenu',
		dom: '',
		timeout: '',
		class: 'app-float-submenu',
		container: {
			class: 'app-float-submenu-container'
		},
		overflow: {
			class: 'overflow-scroll mh-100vh'
		}
	},
	themePanel: {
		class: 'theme-panel',
		toggleAttr: 'data-click="theme-panel-expand"',
		expandCookie: 'theme-panel',
		expandCookieValue: 'expand',
		activeClass: 'active',
		themeList: {
			class: 'theme-list',
			toggleAttr: 'data-theme',
			activeClass: 'active',
			cookieName: 'theme',
			onChangeEvent: 'theme-change'
		},
		darkMode: {
			class: 'dark-mode',
			inputName: 'app-theme-dark-mode',
			cookieName: 'dark-mode'
		}
	},
	animation: { 
		speed: 300 
	},
	scrollBar: {
		attr: 'data-scrollbar="true"',
		heightAttr: 'data-height',
		skipMobileAttr: 'data-skip-mobile="true"',
		wheelPropagationAttr: 'data-wheel-propagation'
	},
	scrollTo: {
		toggleAttr: 'data-toggle="scroll-to"',
		targetAttr: 'data-target'
	},
	scrollTopButton: {
		toggleAttr: 'data-click="scroll-top"',
		showClass: 'show'
	},
	card: { 
		class: 'card',
		expand: {
			toggleAttr: 'data-toggle="card-expand"',
			status: false,
			class: 'card-expand',
			tooltipText: 'Expand / Compress'
		}
	},
	tooltip: {
		toggleAttr: 'data-bs-toggle="tooltip"'
	},
	popover: {
		toggleAttr: 'data-bs-toggle="popover"'
	},
	font: { },
	color: { },
}

var slideUp = function(elm, duration = app.animation.speed) {
	if (!elm.classList.contains('transitioning')) {
		elm.classList.add('transitioning');
		elm.style.transitionProperty = 'height, margin, padding';
		elm.style.transitionDuration = duration + 'ms';
		elm.style.boxSizing = 'border-box';
		elm.style.height = elm.offsetHeight + 'px';
		elm.offsetHeight;
		elm.style.overflow = 'hidden';
		elm.style.height = 0;
		elm.style.paddingTop = 0;
		elm.style.paddingBottom = 0;
		elm.style.marginTop = 0;
		elm.style.marginBottom = 0;
		window.setTimeout( () => {
			elm.style.display = 'none';
			elm.style.removeProperty('height');
			elm.style.removeProperty('padding-top');
			elm.style.removeProperty('padding-bottom');
			elm.style.removeProperty('margin-top');
			elm.style.removeProperty('margin-bottom');
			elm.style.removeProperty('overflow');
			elm.style.removeProperty('transition-duration');
			elm.style.removeProperty('transition-property');
			elm.classList.remove('transitioning');
		}, duration);
	}
};

var slideDown = function(elm, duration = app.animation.speed) {
	if (!elm.classList.contains('transitioning')) {
		elm.classList.add('transitioning');
		elm.style.removeProperty('display');
		let display = window.getComputedStyle(elm).display;
		if (display === 'none') display = 'block';
		elm.style.display = display;
		let height = elm.offsetHeight;
		elm.style.overflow = 'hidden';
		elm.style.height = 0;
		elm.style.paddingTop = 0;
		elm.style.paddingBottom = 0;
		elm.style.marginTop = 0;
		elm.style.marginBottom = 0;
		elm.offsetHeight;
		elm.style.boxSizing = 'border-box';
		elm.style.transitionProperty = "height, margin, padding";
		elm.style.transitionDuration = duration + 'ms';
		elm.style.height = height + 'px';
		elm.style.removeProperty('padding-top');
		elm.style.removeProperty('padding-bottom');
		elm.style.removeProperty('margin-top');
		elm.style.removeProperty('margin-bottom');
		window.setTimeout( () => {
			elm.style.removeProperty('height');
			elm.style.removeProperty('overflow');
			elm.style.removeProperty('transition-duration');
			elm.style.removeProperty('transition-property');
			elm.classList.remove('transitioning');
		}, duration);
	}
};

var slideToggle = function(elm, duration = app.animation.speed) {
	if (window.getComputedStyle(elm).display === 'none') {
		return slideDown(elm, duration);
	} else {
		return slideUp(elm, duration);
	}
};

var setCookie = function(cookieName, cookieValue) {
	var now = new Date();
  var time = now.getTime();
  var expireTime = time + 1000*36000;
  now.setTime(expireTime);
  document.cookie = cookieName + '='+ cookieValue +';expires='+now.toUTCString()+';path=/';
};

var getCookie = function(cookieName) {
  let name = cookieName + "=";
  let decodedCookie = decodeURIComponent(document.cookie);
  let ca = decodedCookie.split(';');
  for(let i = 0; i <ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
};


/* 02. Handle Scrollbar
------------------------------------------------ */
var handleScrollbar = function() {
	"use strict";
	
	var elms = document.querySelectorAll('['+ app.scrollBar.attr +']');
		
	for (var i = 0; i < elms.length; i++) {
		generateScrollbar(elms[i])
	}
};
var generateScrollbar = function(elm) {
  "use strict";
	
	if (elm.scrollbarInit || (app.isMobile && elm.getAttribute(app.scrollBar.skipMobileAttr))) {
		return;
	}
	var dataHeight = (!elm.getAttribute(app.scrollBar.heightAttr)) ? elm.offsetHeight : elm.getAttribute(app.scrollBar.heightAttr);
	
	elm.style.height = dataHeight;
	elm.scrollbarInit = true;
	
	if(app.isMobile || !PerfectScrollbar) {
		elm.style.overflowX = 'scroll';
	} else {
		var dataWheelPropagation = (elm.getAttribute(app.scrollBar.wheelPropagationAttr)) ? elm.getAttribute(app.scrollBar.wheelPropagationAttr) : false;
		
		if (PerfectScrollbar) {
			if (elm.closest('.'+ app.sidebar.class )) {
				app.sidebar.scrollBarDom = new PerfectScrollbar(elm, {
					wheelPropagation: dataWheelPropagation
				});
			} else {
				new PerfectScrollbar(elm, {
					wheelPropagation: dataWheelPropagation
				});
			}
		}
	}
};


/* 03. Handle Sidebar Menu
------------------------------------------------ */
var handleSidebarMenuToggle = function(menus) {
	menus.map(function(menu) {
		menu.onclick = function(e) {
			e.preventDefault();
			
			var target = this.nextElementSibling;
			
			if (!document.querySelector('.'+ app.sidebar.minify.toggledClass)) {
				slideToggle(target);
				
				menus.map(function(m) {
					var otherTarget = m.nextElementSibling;
					if (otherTarget !== target) {
						slideUp(otherTarget);
						otherTarget.closest('.'+ app.sidebar.menuItemClass).classList.remove(app.sidebar.menuExpandClass);
					}
				});
				
				var targetElm = target.closest('.'+ app.sidebar.menuItemClass);
				if (targetElm.classList.contains(app.sidebar.menuExpandClass)) {
					targetElm.classList.remove(app.sidebar.menuExpandClass);
				} else {
					targetElm.classList.add(app.sidebar.menuExpandClass);
				}
			}
		}
	});
};
var handleSidebarMenu = function() {
	"use strict";
	
	var menus = [].slice.call(document.querySelectorAll('.'+ app.sidebar.class +' .'+ app.sidebar.menuClass +' > .'+ app.sidebar.menuItemClass +'.'+ app.sidebar.menuItemHasSubClass +' > .'+ app.sidebar.menuLinkClass +''));
	handleSidebarMenuToggle(menus);
	
	var menus = [].slice.call(document.querySelectorAll('.'+ app.sidebar.class +' .'+ app.sidebar.menuClass +' > .'+ app.sidebar.menuItemClass +'.'+ app.sidebar.menuItemHasSubClass +' .'+ app.sidebar.menuSubmenuClass +' .'+ app.sidebar.menuItemClass +'.'+ app.sidebar.menuItemHasSubClass +' > .'+ app.sidebar.menuLinkClass +''));
	handleSidebarMenuToggle(menus);
};


/* 04. Handle Sidebar Scroll Memory
------------------------------------------------ */
var handleSidebarScrollMemory = function() {
	if (!app.isMobile) {
		try {
			if (typeof(Storage) !== 'undefined' && typeof(localStorage) !== 'undefined') {
				var elm = document.querySelector('.'+ app.sidebar.class +' ['+ app.scrollBar.attr +']');
				
				if (elm) {
					elm.onscroll = function() {
						localStorage.setItem(app.sidebar.scrollBar.localStorage, this.scrollTop);
					}
					var defaultScroll = localStorage.getItem(app.sidebar.scrollBar.localStorage);
					if (defaultScroll) {
						document.querySelector('.'+ app.sidebar.class +' ['+ app.scrollBar.attr +']').scrollTop = defaultScroll;
					}
				}
			}
		} catch (error) {
			console.log(error);
		}
	}
};


/* 04. Handle Sidebar Minify
------------------------------------------------ */
var handleSidebarMinify = function() {
	var elms = [].slice.call(document.querySelectorAll('['+ app.sidebar.minify.toggleAttr +']'));
	elms.map(function(elm) {
		elm.onclick = function(e) {
			e.preventDefault();
		
			var targetElm = document.querySelector('.'+ app.class);
			
			if (targetElm) {
				if (targetElm.classList.contains(app.sidebar.minify.toggledClass)) {
					targetElm.classList.remove(app.sidebar.minify.toggledClass);
					localStorage.removeItem(app.sidebar.minify.localStorage);
				} else {
					targetElm.classList.add(app.sidebar.minify.toggledClass);
					localStorage.setItem(app.sidebar.minify.localStorage, true);
				}
			}
		};
	});
	
	if (typeof(Storage) !== 'undefined') {
		if (localStorage[app.sidebar.minify.localStorage]) {
			var targetElm = document.querySelector('.'+ app.class);
			
			if (targetElm) {
				targetElm.classList.add(app.sidebar.minify.toggledClass);
			}
		}
	}
};
var handleSidebarMobileToggle = function() {
	var elms = [].slice.call(document.querySelectorAll('['+ app.sidebar.mobile.toggleAttr +']'));
	
	elms.map(function(elm) {
		elm.onclick = function(e) {
			e.preventDefault();
			
			var targetElm = document.querySelector('.'+ app.class)
			
			if (targetElm) {
				targetElm.classList.remove(app.sidebar.mobile.closedClass);
				targetElm.classList.add(app.sidebar.mobile.toggledClass);
			}
		};
	});
};
var handleSidebarMobileDismiss = function() {
	var elms = [].slice.call(document.querySelectorAll('['+ app.sidebar.mobile.dismissAttr +']'));
	
	elms.map(function(elm) {
		elm.onclick = function(e) {
			e.preventDefault();
			
			var targetElm = document.querySelector('.'+ app.class)
			
			if (targetElm) {
				targetElm.classList.remove(app.sidebar.mobile.toggledClass);
				targetElm.classList.add(app.sidebar.mobile.closedClass);
				
				setTimeout(function() {
					targetElm.classList.remove(app.sidebar.mobile.closedClass);
				}, app.animation.speed);
			}
		};
	});
};


/* 05. Handle Sidebar Minify Float Menu
------------------------------------------------ */
var handleGetHiddenMenuHeight = function(elm) {
	elm.setAttribute('style', 'position: absolute; visibility: hidden; display: block !important');
	var targetHeight  = elm.clientHeight;
	elm.removeAttribute('style');
	return targetHeight;
}
var handleSidebarMinifyFloatMenuClick = function() {
	var elms = [].slice.call(document.querySelectorAll('.'+ app.floatSubmenu.class +' .'+ app.sidebar.menuItemClass +'.'+ app.sidebar.menuItemHasSubClass +' > .'+ app.sidebar.menuLinkClass));
	if (elms) {
		elms.map(function(elm) {
			elm.onclick = function(e) {
				e.preventDefault();
				var targetItem = this.closest('.' + app.sidebar.menuItemClass);
				var target = targetItem.querySelector('.' + app.sidebar.menuSubmenuClass);
				var targetStyle = getComputedStyle(target);
				var close = (targetStyle.getPropertyValue('display') != 'none') ? true : false;
				var expand = (targetStyle.getPropertyValue('display') != 'none') ? false : true;
				
				slideToggle(target);
				
				var loopHeight = setInterval(function() {
					var targetMenu = document.querySelector(app.floatSubmenu.id);
					var targetMenuArrow = document.querySelector(app.floatSubmenu.arrow.id);
					var targetMenuLine = document.querySelector(app.floatSubmenu.line.id);
					var targetHeight = targetMenu.clientHeight;
					var targetOffset = targetMenu.getBoundingClientRect();
					var targetOriTop = targetMenu.getAttribute('data-offset-top');
					var targetMenuTop = targetMenu.getAttribute('data-menu-offset-top');
					var targetTop 	 = targetOffset.top;
					var windowHeight = document.body.clientHeight;
					if (close) {
						if (targetTop > targetOriTop) {
							targetTop = (targetTop > targetOriTop) ? targetOriTop : targetTop;
							targetMenu.style.top = targetTop + 'px';
							targetMenu.style.bottom = 'auto';
							targetMenuArrow.style.top = '20px';
							targetMenuArrow.style.bottom = 'auto';
							targetMenuLine.style.top = '20px';
							targetMenuLine.style.bottom = 'auto';
						}
					}
					if (expand) {
						if ((windowHeight - targetTop) < targetHeight) {
							var arrowBottom = (windowHeight - targetMenuTop) - 22;
							targetMenu.style.top = 'auto';
							targetMenu.style.bottom = 0;
							targetMenuArrow.style.top = 'auto';
							targetMenuArrow.style.bottom = arrowBottom + 'px';
							targetMenuLine.style.top = '20px';
							targetMenuLine.style.bottom = arrowBottom + 'px';
						}
						var floatSubmenuElm = document.querySelector(app.floatSubmenu.id + ' .'+ app.floatSubmenu.class);
						if (targetHeight > windowHeight) {
							if (floatSubmenuElm) {
								var splitClass = (app.floatSubmenu.overflow.class).split(' ');
								for (var i = 0; i < splitClass.length; i++) {
									floatSubmenuElm.classList.add(splitClass[i]);
								}
							}
						}
					}
				}, 1);
				setTimeout(function() {
					clearInterval(loopHeight);
				}, app.animation.speed);
			}
		});
	}
}
var handleSidebarMinifyFloatMenu = function() {
	var elms = [].slice.call(document.querySelectorAll('.' + app.sidebar.class + ' .'+ app.sidebar.menuClass +' > .'+ app.sidebar.menuItemClass +'.'+ app.sidebar.menuItemHasSubClass +' > .'+ app.sidebar.menuLinkClass +''));
	if (elms) {
		elms.map(function(elm) {
			elm.onmouseenter = function() {
				var appElm = document.querySelector('.' + app.class);
				
				if (appElm && appElm.classList.contains(app.sidebar.minify.toggledClass)) {
					clearTimeout(app.floatSubmenu.timeout);
					
					var targetMenu = this.closest('.'+ app.sidebar.menuItemClass).querySelector('.' + app.sidebar.menuSubmenuClass);
					if (app.floatSubmenu.dom == this && document.querySelector(app.floatSubmenu.class)) {
						return;
					} else {
						app.floatSubmenu.dom = this;
					}
					var targetMenuHtml = targetMenu.innerHTML;
					if (targetMenuHtml) {
						var bodyStyle     = getComputedStyle(document.body);
						var sidebarOffset = document.querySelector('.'+ app.sidebar.class).getBoundingClientRect();
						var sidebarWidth  = parseInt(document.querySelector('.'+ app.sidebar.class).clientWidth);
						var sidebarX      = (bodyStyle.getPropertyValue('direction') != 'rtl') ? (sidebarOffset.left + sidebarWidth) : (document.body.clientWidth - sidebarOffset.left);
						var targetHeight  = handleGetHiddenMenuHeight(targetMenu);
						var targetOffset  = this.getBoundingClientRect();
						var targetTop     = targetOffset.top;
						var targetLeft    = (bodyStyle.getPropertyValue('direction') != 'rtl') ? sidebarX : 'auto';
						var targetRight   = (bodyStyle.getPropertyValue('direction') != 'rtl') ? 'auto' : sidebarX;
						var windowHeight  = document.body.clientHeight;
						
						if (!document.querySelector('#'+ app.floatSubmenu.id)) {
							var overflowClass = '';
							if (targetHeight > windowHeight) {
								overflowClass = app.floatSubmenu.overflow.class;
							}
							var html = document.createElement('div');
							html.setAttribute('id', app.floatSubmenu.id);
							html.setAttribute('class', app.floatSubmenu.class);
							html.setAttribute('data-offset-top', targetTop);
							html.setAttribute('data-menu-offset-top', targetTop);
							html.innerHTML = ''+
							'	<div class="'+ app.floatSubmenu.container.class +' '+ overflowClass +'">'+ targetMenuHtml + '</div>';
							appElm.appendChild(html);
							
							var elm = document.getElementById(app.floatSubmenu.id);
							elm.onmouseover = function() {
								clearTimeout(app.floatSubmenu.timeout);
							};
							elm.onmouseout = function() {
								app.floatSubmenu.timeout = setTimeout(() => {
									document.querySelector('#'+ app.floatSubmenu.id).remove();
								}, app.animation.speed);
							};
						} else {
							var floatSubmenu = document.querySelector('#'+ app.floatSubmenu.id);
							var floatSubmenuElm = document.querySelector('#'+ app.floatSubmenu.id + ' .'+ app.floatSubmenu.container.class);
							
							if (targetHeight > windowHeight) {
								if (floatSubmenuElm) {
									var splitClass = (app.floatSubmenu.overflow.class).split(' ');
									for (var i = 0; i < splitClass.length; i++) {
										floatSubmenuElm.classList.add(splitClass[i]);
									}
								}
							}
							floatSubmenu.setAttribute('data-offset-top', targetTop);
							floatSubmenu.setAttribute('data-menu-offset-top', targetTop);
							floatSubmenuElm.innerHTML = targetMenuHtml;
						}
				
						var targetHeight = document.querySelector('#'+ app.floatSubmenu.id).clientHeight;
						var floatSubmenuElm = document.querySelector('#'+ app.floatSubmenu.id);
						if ((windowHeight - targetTop) > targetHeight) {
							if (floatSubmenuElm) {
								floatSubmenuElm.style.top = targetTop + 'px';
								floatSubmenuElm.style.left = targetLeft + 'px';
								floatSubmenuElm.style.bottom = 'auto';
								floatSubmenuElm.style.right = targetRight + 'px';
							}
						} else {
							var arrowBottom = (windowHeight - targetTop) - 21;
							if (floatSubmenuElm) {
								floatSubmenuElm.style.top = 'auto';
								floatSubmenuElm.style.left = targetLeft + 'px';
								floatSubmenuElm.style.bottom = 0;
								floatSubmenuElm.style.right = targetRight + 'px';
							}
						}
						handleSidebarMinifyFloatMenuClick();
					} else {
						document.querySelector('#'+ app.floatSubmenu.id).remove();
						app.floatSubmenu.dom = '';
					}
				}
			}
			elm.onmouseleave = function() {
				var elm = document.querySelector('.' + app.class);
				if (elm && elm.classList.contains(app.sidebar.minify.toggledClass)) {
					app.floatSubmenu.timeout = setTimeout(() => {
						document.querySelector('#'+ app.floatSubmenu.id).remove();
						app.floatSubmenu.dom = '';
					}, 250);
				}
			}
		});
	}
};


/* 07. Handle Card - Expand
------------------------------------------------ */
var handleCardAction = function() {
	"use strict";

	if (app.card.expand.status) {
		return false;
	}
	app.card.expandStatus = true;

	// expand
	var expandTogglerList = [].slice.call(document.querySelectorAll('['+ app.card.expand.toggleAttr +']'));
	var expandTogglerTooltipList = expandTogglerList.map(function (expandTogglerEl) {
		expandTogglerEl.onclick = function(e) {
			e.preventDefault();
		
			var target = this.closest('.'+ app.card.class);
			var targetClass = app.card.expand.class;

			if (document.body.classList.contains(targetClass) && target.classList.contains(targetClass)) {
				target.removeAttribute('style');
				target.classList.remove(targetClass);
				document.body.classList.remove(targetClass);
			} else {
				document.body.classList.add(targetClass);
				target.classList.add(targetClass);
			}
		
			window.dispatchEvent(new Event('resize'));
		};
	
		return new bootstrap.Tooltip(expandTogglerEl, {
			title: app.card.expand.tooltipText,
			placement: 'bottom',
			trigger: 'hover',
			container: 'body'
		});
	});
};


/* 08. Handle Tooltip & Popover Activation
------------------------------------------------ */
var handelTooltipPopoverActivation = function() {
	"use strict";
	var tooltipTriggerList = [].slice.call(document.querySelectorAll('['+ app.tooltip.toggleAttr +']'))
	var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
		return new bootstrap.Tooltip(tooltipTriggerEl);
	});
	
	var popoverTriggerList = [].slice.call(document.querySelectorAll('['+ app.popover.toggleAttr +']'))
	var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
		return new bootstrap.Popover(popoverTriggerEl);
	});
};


/* 09. Handle Scroll to Top Button Activation
------------------------------------------------ */
var handleScrollToTopButton = function() {
	"use strict";
	var elmTriggerList = [].slice.call(document.querySelectorAll('['+ app.scrollTopButton.toggleAttr +']'));
	
	document.onscroll = function() {
		var doc = document.documentElement;
		var totalScroll = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);
		var elmList = elmTriggerList.map(function(elm) {
			if (totalScroll >= 200) {
				if (!elm.classList.contains(app.scrollTopButton.showClass)) {
					elm.classList.add(app.scrollTopButton.showClass);
				}
			} else {
				elm.classList.remove(app.scrollTopButton.showClass);
			}
		});
	}
	
	var elmList = elmTriggerList.map(function(elm) {
		elm.onclick = function(e) {
			e.preventDefault();
			
			window.scrollTo({top: 0, behavior: 'smooth'});
		}
	});
};


/* 11. Handle Scroll to
------------------------------------------------ */
var handleScrollTo = function() {
	var elmTriggerList = [].slice.call(document.querySelectorAll('['+ app.scrollTo.toggleAttr +']'));
	var elmList = elmTriggerList.map(function(elm) {
		elm.onclick = function(e) {
			e.preventDefault();
		
			var targetAttr = (elm.getAttribute(app.scrollTo.targetAttr)) ? this.getAttribute(app.scrollTo.targetAttr) : this.getAttribute('href');
			var targetElm = document.querySelectorAll(targetAttr)[0];
			var targetHeader = document.querySelectorAll('.'+ app.header.class)[0];
			var targetHeight = targetHeader.offsetHeight;
			if (targetElm) {
				var targetTop = targetElm.offsetTop - targetHeight + 36;
				window.scrollTo({top: targetTop, behavior: 'smooth'});
			}
		}
	});
};


/* 12. Handle Theme Panel Expand
------------------------------------------------ */
var handleThemePanelExpand = function() {
	var elmList = [].slice.call(document.querySelectorAll('['+ app.themePanel.toggleAttr +']'));
	
	elmList.map(function(elm) {
		elm.onclick = function(e) {
			e.preventDefault();
			
			var targetContainer = document.querySelector('.'+ app.themePanel.class);
			var targetExpand = false;
		
			if (targetContainer.classList.contains(app.themePanel.activeClass)) {
				targetContainer.classList.remove(app.themePanel.activeClass);
				setCookie(app.themePanel.expandCookie, '');
			} else {
				targetContainer.classList.add(app.themePanel.activeClass);
				setCookie(app.themePanel.expandCookie, app.themePanel.expandCookieValue);
			}
		}
	});
	
	if (getCookie(app.themePanel.expandCookie) && getCookie(app.themePanel.expandCookie) == app.themePanel.expandCookieValue) {
		var elm = document.querySelector('['+ app.themePanel.toggleAttr +']');
		if (elm) {
			elm.click();
		}
	}
};


/* 13. Handle Theme Page Control
------------------------------------------------ */
var handleThemePageControl = function() {
	// Theme Click
	var elms = [].slice.call(document.querySelectorAll('.'+ app.themePanel.themeList.class +' ['+ app.themePanel.themeList.toggleAttr +']'));
	elms.map(function(elm) {
		elm.onclick = function() {
			var targetThemeClass = this.getAttribute(app.themePanel.themeList.toggleAttr);
			for (var x = 0; x < document.body.classList.length; x++) {
				var targetClass = document.body.classList[x];
				if (targetClass.search('theme-') > -1) {
					document.body.classList.remove(targetClass);
				}
			}
			if (targetThemeClass) {
				document.body.classList.add(targetThemeClass);
			}
		
			var togglers = [].slice.call(document.querySelectorAll('.'+ app.themePanel.themeList.class +' ['+ app.themePanel.themeList.toggleAttr +']'));
			togglers.map(function(toggler) {
				if (toggler != elm) {
					toggler.closest('li').classList.remove(app.themePanel.themeList.activeClass);
				} else {
					toggler.closest('li').classList.add(app.themePanel.themeList.activeClass);
				}
			});
			setCookie(app.themePanel.themeList.cookieName, targetThemeClass);
			document.dispatchEvent(new CustomEvent(app.themePanel.themeList.onChangeEvent));
		}
	});
	
	// Theme Cookie
	if (getCookie(app.themePanel.themeList.cookieName) && document.querySelector('.'+ app.themePanel.themeList.class)) {
		var targetElm = document.querySelector('.'+ app.themePanel.themeList.class +' ['+ app.themePanel.themeList.toggleAttr +'="'+ getCookie(app.themePanel.themeList.cookieName) +'"]');
		if (targetElm) {
			targetElm.click();
		}
	}
	
	// Dark Mode Click
	var elms = [].slice.call(document.querySelectorAll('.'+ app.themePanel.class +' [name="'+ app.themePanel.darkMode.inputName +'"]'));
	elms.map(function(elm) {
		elm.onchange = function() {
			var targetCookie = '';
	
			if (this.checked) {
				document.querySelector('html').classList.add(app.themePanel.darkMode.class);
				targetCookie = 'dark-mode';
			} else {
				document.querySelector('html').classList.remove(app.themePanel.darkMode.class);
			}
			App.initVariable();
			setCookie(app.themePanel.darkMode.cookieName, targetCookie);
			document.dispatchEvent(new CustomEvent(app.themePanel.themeList.onChangeEvent));
		}
	});
	
	// Dark Mode Cookie
	if (getCookie(app.themePanel.darkMode.cookieName) && document.querySelector('.'+ app.themePanel.class +' [name="'+ app.themePanel.darkMode.inputName +'"]')) {
		var elm = document.querySelector('.'+ app.themePanel.class +' [name="'+ app.themePanel.darkMode.inputName +'"]');
		if (elm) {
			elm.checked = true;
			elm.onchange();
		}
	}
};


/* Application Controller
------------------------------------------------ */
var App = function () {
	"use strict";
	
	return {
		//main function
		init: function () {
			this.initComponent();
			this.initVariable();
			this.initHeader();
			this.initSidebar();
		},
		initSidebar: function() {
			handleSidebarScrollMemory();
			handleSidebarMinifyFloatMenu();
			handleSidebarMenu();
			handleSidebarMinify();
			handleSidebarMobileToggle();
			handleSidebarMobileDismiss();
		},
		initHeader: function() {
		},
		initComponent: function() {
			handleScrollbar();
			handleCardAction();
			handelTooltipPopoverActivation();
			handleScrollToTopButton();
			handleScrollTo();
			handleThemePanelExpand();
			handleThemePageControl();
		},
		scrollTop: function() {
			window.scrollTo({top: 0, behavior: 'smooth'});
		},
		getCssVariable: function(variable) {
			return window.getComputedStyle(document.body).getPropertyValue(variable).trim();
		},
		initVariable: function() {
			app.color.theme          = this.getCssVariable('--app-theme');
			app.font.family          = this.getCssVariable('--bs-body-font-family');
			app.font.size            = this.getCssVariable('--bs-body-font-size');
			app.font.weight          = this.getCssVariable('--bs-body-font-weight');
			app.color.componentColor = this.getCssVariable('--app-component-color');
			app.color.componentBg    = this.getCssVariable('--app-component-bg');
			app.color.dark           = this.getCssVariable('--bs-dark');
			app.color.light          = this.getCssVariable('--bs-light');
			app.color.blue           = this.getCssVariable('--bs-blue');
			app.color.indigo         = this.getCssVariable('--bs-indigo');
			app.color.purple         = this.getCssVariable('--bs-purple');
			app.color.pink           = this.getCssVariable('--bs-pink');
			app.color.red            = this.getCssVariable('--bs-red');
			app.color.orange         = this.getCssVariable('--bs-orange');
			app.color.yellow         = this.getCssVariable('--bs-yellow');
			app.color.green          = this.getCssVariable('--bs-green');
			app.color.success        = this.getCssVariable('--bs-success');
			app.color.teal           = this.getCssVariable('--bs-teal');
			app.color.cyan           = this.getCssVariable('--bs-cyan');
			app.color.white          = this.getCssVariable('--bs-white');
			app.color.gray           = this.getCssVariable('--bs-gray');
			app.color.lime           = this.getCssVariable('--bs-lime');
			app.color.gray100        = this.getCssVariable('--bs-gray-100');
			app.color.gray200        = this.getCssVariable('--bs-gray-200');
			app.color.gray300        = this.getCssVariable('--bs-gray-300');
			app.color.gray400        = this.getCssVariable('--bs-gray-400');
			app.color.gray500        = this.getCssVariable('--bs-gray-500');
			app.color.gray600        = this.getCssVariable('--bs-gray-600');
			app.color.gray700        = this.getCssVariable('--bs-gray-700');
			app.color.gray800        = this.getCssVariable('--bs-gray-800');
			app.color.gray900        = this.getCssVariable('--bs-gray-900');
			app.color.black          = this.getCssVariable('--bs-black');
			
			app.color.themeRgb          = this.getCssVariable('--app-theme-rgb');
			app.font.familyRgb          = this.getCssVariable('--bs-body-font-family-rgb');
			app.font.sizeRgb            = this.getCssVariable('--bs-body-font-size-rgb');
			app.font.weightRgb          = this.getCssVariable('--bs-body-font-weight-rgb');
			app.color.componentColorRgb = this.getCssVariable('--app-component-color-rgb');
			app.color.componentBgRgb    = this.getCssVariable('--app-component-bg-rgb');
			app.color.darkRgb           = this.getCssVariable('--bs-dark-rgb');
			app.color.lightRgb          = this.getCssVariable('--bs-light-rgb');
			app.color.blueRgb           = this.getCssVariable('--bs-blue-rgb');
			app.color.indigoRgb         = this.getCssVariable('--bs-indigo-rgb');
			app.color.purpleRgb         = this.getCssVariable('--bs-purple-rgb');
			app.color.pinkRgb           = this.getCssVariable('--bs-pink-rgb');
			app.color.redRgb            = this.getCssVariable('--bs-red-rgb');
			app.color.orangeRgb         = this.getCssVariable('--bs-orange-rgb');
			app.color.yellowRgb         = this.getCssVariable('--bs-yellow-rgb');
			app.color.greenRgb          = this.getCssVariable('--bs-green-rgb');
			app.color.successRgb        = this.getCssVariable('--bs-success-rgb');
			app.color.tealRgb           = this.getCssVariable('--bs-teal-rgb');
			app.color.cyanRgb           = this.getCssVariable('--bs-cyan-rgb');
			app.color.whiteRgb          = this.getCssVariable('--bs-white-rgb');
			app.color.grayRgb           = this.getCssVariable('--bs-gray-rgb');
			app.color.limeRgb           = this.getCssVariable('--bs-lime-rgb');
			app.color.gray100Rgb        = this.getCssVariable('--bs-gray-100-rgb');
			app.color.gray200Rgb        = this.getCssVariable('--bs-gray-200-rgb');
			app.color.gray300Rgb        = this.getCssVariable('--bs-gray-300-rgb');
			app.color.gray400Rgb        = this.getCssVariable('--bs-gray-400-rgb');
			app.color.gray500Rgb        = this.getCssVariable('--bs-gray-500-rgb');
			app.color.gray600Rgb        = this.getCssVariable('--bs-gray-600-rgb');
			app.color.gray700Rgb        = this.getCssVariable('--bs-gray-700-rgb');
			app.color.gray800Rgb        = this.getCssVariable('--bs-gray-800-rgb');
			app.color.gray900Rgb        = this.getCssVariable('--bs-gray-900-rgb');
			app.color.blackRgb          = this.getCssVariable('--bs-black-rgb');
		}
	};
}();

document.addEventListener('DOMContentLoaded', function() {
	App.init();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG5UZW1wbGF0ZSBOYW1lOiBBU1BTVFVESU8gLSBSZXNwb25zaXZlIEJvb3RzdHJhcCA1IEFkbWluIFRlbXBsYXRlXHJcblZlcnNpb246IDMuMy4wXHJcbkF1dGhvcjogU2VhbiBOZ3VcclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRBUFBTIENPTlRFTlQgVEFCTEVcclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cdDwhLS0gPT09PT09PT0gR0xPQkFMIFNDUklQVCBTRVRUSU5HID09PT09PT09IC0tPlxyXG4gIDAxLiBHbG9iYWwgVmFyaWFibGVcclxuICAwMi4gSGFuZGxlIFNjcm9sbGJhclxyXG4gIDAzLiBIYW5kbGUgU2lkZWJhciBNZW51XHJcbiAgMDQuIEhhbmRsZSBTaWRlYmFyIE1pbmlmeVxyXG4gIDA1LiBIYW5kbGUgU2lkZWJhciBNaW5pZnkgRmxvYXQgTWVudVxyXG4gIDA2LiBIYW5kbGUgRHJvcGRvd24gQ2xvc2UgT3B0aW9uXHJcbiAgMDcuIEhhbmRsZSBDYXJkIC0gUmVtb3ZlIC8gUmVsb2FkIC8gQ29sbGFwc2UgLyBFeHBhbmRcclxuICAwOC4gSGFuZGxlIFRvb2x0aXAgJiBQb3BvdmVyIEFjdGl2YXRpb25cclxuICAwOS4gSGFuZGxlIFNjcm9sbCB0byBUb3AgQnV0dG9uIEFjdGl2YXRpb25cclxuICAxMC4gSGFuZGxlIGhleFRvUmdiYVxyXG4gIDExLiBIYW5kbGUgU2Nyb2xsIHRvXHJcbiAgMTIuIEhhbmRsZSBUaGVtZSBQYW5lbCBFeHBhbmRcclxuICAxMy4gSGFuZGxlIFRoZW1lIFBhZ2UgQ29udHJvbFxyXG4gIDE0LiBIYW5kbGUgRW5hYmxlIFRvb2x0aXAgJiBQb3BvdmVyXHJcblx0XHJcblx0PCEtLSA9PT09PT09PSBBUFBMSUNBVElPTiBTRVRUSU5HID09PT09PT09IC0tPlxyXG5cdEFwcGxpY2F0aW9uIENvbnRyb2xsZXJcclxuKi9cclxuXHJcblxyXG5cclxuLyogMDEuIEdsb2JhbCBWYXJpYWJsZVxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGFwcCA9IHtcclxuXHRjbGFzczogJ2FwcCcsXHJcblx0aXNNb2JpbGU6ICgoL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB8fCB3aW5kb3cuaW5uZXJXaWR0aCA8IDk5MiksXHJcblx0aGVhZGVyOiB7XHJcblx0XHRjbGFzczogJ2FwcC1oZWFkZXInXHJcblx0fSxcclxuXHRzaWRlYmFyOiB7XHJcblx0XHRjbGFzczogJ2FwcC1zaWRlYmFyJyxcclxuXHRcdG1lbnVDbGFzczogJ21lbnUnLFxyXG5cdFx0bWVudUl0ZW1DbGFzczogJ21lbnUtaXRlbScsXHJcblx0XHRtZW51SXRlbUhhc1N1YkNsYXNzOiAnaGFzLXN1YicsXHJcblx0XHRtZW51TGlua0NsYXNzOiAnbWVudS1saW5rJyxcclxuXHRcdG1lbnVTdWJtZW51Q2xhc3M6ICdtZW51LXN1Ym1lbnUnLFxyXG5cdFx0bWVudUV4cGFuZENsYXNzOiAnZXhwYW5kJyxcclxuXHRcdG1pbmlmeToge1xyXG5cdFx0XHR0b2dnbGVkQ2xhc3M6ICdhcHAtc2lkZWJhci1taW5pZmllZCcsXHJcblx0XHRcdGxvY2FsU3RvcmFnZTogJ2FwcFNpZGViYXJNaW5pZmllZCcsXHJcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cInNpZGViYXItbWluaWZ5XCInXHJcblx0XHR9LFxyXG5cdFx0bW9iaWxlOiB7XHJcblx0XHRcdHRvZ2dsZWRDbGFzczogJ2FwcC1zaWRlYmFyLW1vYmlsZS10b2dnbGVkJyxcclxuXHRcdFx0Y2xvc2VkQ2xhc3M6ICdhcHAtc2lkZWJhci1tb2JpbGUtY2xvc2VkJyxcclxuXHRcdFx0ZGlzbWlzc0F0dHI6ICdkYXRhLWRpc21pc3M9XCJzaWRlYmFyLW1vYmlsZVwiJyxcclxuXHRcdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwic2lkZWJhci1tb2JpbGVcIicsXHJcblx0XHR9LFxyXG5cdFx0c2Nyb2xsQmFyOiB7XHJcblx0XHRcdGxvY2FsU3RvcmFnZTogJ2FwcFNpZGViYXJTY3JvbGxQb3NpdGlvbicsXHJcblx0XHRcdGRvbTogJycsXHJcblx0XHR9XHJcblx0fSxcclxuXHRmbG9hdFN1Ym1lbnU6IHtcclxuXHRcdGlkOiAnYXBwLWZsb2F0LXN1Ym1lbnUnLFxyXG5cdFx0ZG9tOiAnJyxcclxuXHRcdHRpbWVvdXQ6ICcnLFxyXG5cdFx0Y2xhc3M6ICdhcHAtZmxvYXQtc3VibWVudScsXHJcblx0XHRjb250YWluZXI6IHtcclxuXHRcdFx0Y2xhc3M6ICdhcHAtZmxvYXQtc3VibWVudS1jb250YWluZXInXHJcblx0XHR9LFxyXG5cdFx0b3ZlcmZsb3c6IHtcclxuXHRcdFx0Y2xhc3M6ICdvdmVyZmxvdy1zY3JvbGwgbWgtMTAwdmgnXHJcblx0XHR9XHJcblx0fSxcclxuXHR0aGVtZVBhbmVsOiB7XHJcblx0XHRjbGFzczogJ3RoZW1lLXBhbmVsJyxcclxuXHRcdHRvZ2dsZUF0dHI6ICdkYXRhLWNsaWNrPVwidGhlbWUtcGFuZWwtZXhwYW5kXCInLFxyXG5cdFx0ZXhwYW5kQ29va2llOiAndGhlbWUtcGFuZWwnLFxyXG5cdFx0ZXhwYW5kQ29va2llVmFsdWU6ICdleHBhbmQnLFxyXG5cdFx0YWN0aXZlQ2xhc3M6ICdhY3RpdmUnLFxyXG5cdFx0dGhlbWVMaXN0OiB7XHJcblx0XHRcdGNsYXNzOiAndGhlbWUtbGlzdCcsXHJcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRoZW1lJyxcclxuXHRcdFx0YWN0aXZlQ2xhc3M6ICdhY3RpdmUnLFxyXG5cdFx0XHRjb29raWVOYW1lOiAndGhlbWUnLFxyXG5cdFx0XHRvbkNoYW5nZUV2ZW50OiAndGhlbWUtY2hhbmdlJ1xyXG5cdFx0fSxcclxuXHRcdGRhcmtNb2RlOiB7XHJcblx0XHRcdGNsYXNzOiAnZGFyay1tb2RlJyxcclxuXHRcdFx0aW5wdXROYW1lOiAnYXBwLXRoZW1lLWRhcmstbW9kZScsXHJcblx0XHRcdGNvb2tpZU5hbWU6ICdkYXJrLW1vZGUnXHJcblx0XHR9XHJcblx0fSxcclxuXHRhbmltYXRpb246IHsgXHJcblx0XHRzcGVlZDogMzAwIFxyXG5cdH0sXHJcblx0c2Nyb2xsQmFyOiB7XHJcblx0XHRhdHRyOiAnZGF0YS1zY3JvbGxiYXI9XCJ0cnVlXCInLFxyXG5cdFx0aGVpZ2h0QXR0cjogJ2RhdGEtaGVpZ2h0JyxcclxuXHRcdHNraXBNb2JpbGVBdHRyOiAnZGF0YS1za2lwLW1vYmlsZT1cInRydWVcIicsXHJcblx0XHR3aGVlbFByb3BhZ2F0aW9uQXR0cjogJ2RhdGEtd2hlZWwtcHJvcGFnYXRpb24nXHJcblx0fSxcclxuXHRzY3JvbGxUbzoge1xyXG5cdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwic2Nyb2xsLXRvXCInLFxyXG5cdFx0dGFyZ2V0QXR0cjogJ2RhdGEtdGFyZ2V0J1xyXG5cdH0sXHJcblx0c2Nyb2xsVG9wQnV0dG9uOiB7XHJcblx0XHR0b2dnbGVBdHRyOiAnZGF0YS1jbGljaz1cInNjcm9sbC10b3BcIicsXHJcblx0XHRzaG93Q2xhc3M6ICdzaG93J1xyXG5cdH0sXHJcblx0Y2FyZDogeyBcclxuXHRcdGNsYXNzOiAnY2FyZCcsXHJcblx0XHRleHBhbmQ6IHtcclxuXHRcdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwiY2FyZC1leHBhbmRcIicsXHJcblx0XHRcdHN0YXR1czogZmFsc2UsXHJcblx0XHRcdGNsYXNzOiAnY2FyZC1leHBhbmQnLFxyXG5cdFx0XHR0b29sdGlwVGV4dDogJ0V4cGFuZCAvIENvbXByZXNzJ1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0dG9vbHRpcDoge1xyXG5cdFx0dG9nZ2xlQXR0cjogJ2RhdGEtYnMtdG9nZ2xlPVwidG9vbHRpcFwiJ1xyXG5cdH0sXHJcblx0cG9wb3Zlcjoge1xyXG5cdFx0dG9nZ2xlQXR0cjogJ2RhdGEtYnMtdG9nZ2xlPVwicG9wb3ZlclwiJ1xyXG5cdH0sXHJcblx0Zm9udDogeyB9LFxyXG5cdGNvbG9yOiB7IH0sXHJcbn1cclxuXHJcbnZhciBzbGlkZVVwID0gZnVuY3Rpb24oZWxtLCBkdXJhdGlvbiA9IGFwcC5hbmltYXRpb24uc3BlZWQpIHtcclxuXHRpZiAoIWVsbS5jbGFzc0xpc3QuY29udGFpbnMoJ3RyYW5zaXRpb25pbmcnKSkge1xyXG5cdFx0ZWxtLmNsYXNzTGlzdC5hZGQoJ3RyYW5zaXRpb25pbmcnKTtcclxuXHRcdGVsbS5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSAnaGVpZ2h0LCBtYXJnaW4sIHBhZGRpbmcnO1xyXG5cdFx0ZWxtLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGR1cmF0aW9uICsgJ21zJztcclxuXHRcdGVsbS5zdHlsZS5ib3hTaXppbmcgPSAnYm9yZGVyLWJveCc7XHJcblx0XHRlbG0uc3R5bGUuaGVpZ2h0ID0gZWxtLm9mZnNldEhlaWdodCArICdweCc7XHJcblx0XHRlbG0ub2Zmc2V0SGVpZ2h0O1xyXG5cdFx0ZWxtLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcblx0XHRlbG0uc3R5bGUuaGVpZ2h0ID0gMDtcclxuXHRcdGVsbS5zdHlsZS5wYWRkaW5nVG9wID0gMDtcclxuXHRcdGVsbS5zdHlsZS5wYWRkaW5nQm90dG9tID0gMDtcclxuXHRcdGVsbS5zdHlsZS5tYXJnaW5Ub3AgPSAwO1xyXG5cdFx0ZWxtLnN0eWxlLm1hcmdpbkJvdHRvbSA9IDA7XHJcblx0XHR3aW5kb3cuc2V0VGltZW91dCggKCkgPT4ge1xyXG5cdFx0XHRlbG0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHRcdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdoZWlnaHQnKTtcclxuXHRcdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLXRvcCcpO1xyXG5cdFx0XHRlbG0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctYm90dG9tJyk7XHJcblx0XHRcdGVsbS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLXRvcCcpO1xyXG5cdFx0XHRlbG0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi1ib3R0b20nKTtcclxuXHRcdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvdmVyZmxvdycpO1xyXG5cdFx0XHRlbG0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tZHVyYXRpb24nKTtcclxuXHRcdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLXByb3BlcnR5Jyk7XHJcblx0XHRcdGVsbS5jbGFzc0xpc3QucmVtb3ZlKCd0cmFuc2l0aW9uaW5nJyk7XHJcblx0XHR9LCBkdXJhdGlvbik7XHJcblx0fVxyXG59O1xyXG5cclxudmFyIHNsaWRlRG93biA9IGZ1bmN0aW9uKGVsbSwgZHVyYXRpb24gPSBhcHAuYW5pbWF0aW9uLnNwZWVkKSB7XHJcblx0aWYgKCFlbG0uY2xhc3NMaXN0LmNvbnRhaW5zKCd0cmFuc2l0aW9uaW5nJykpIHtcclxuXHRcdGVsbS5jbGFzc0xpc3QuYWRkKCd0cmFuc2l0aW9uaW5nJyk7XHJcblx0XHRlbG0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKTtcclxuXHRcdGxldCBkaXNwbGF5ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxtKS5kaXNwbGF5O1xyXG5cdFx0aWYgKGRpc3BsYXkgPT09ICdub25lJykgZGlzcGxheSA9ICdibG9jayc7XHJcblx0XHRlbG0uc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XHJcblx0XHRsZXQgaGVpZ2h0ID0gZWxtLm9mZnNldEhlaWdodDtcclxuXHRcdGVsbS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG5cdFx0ZWxtLnN0eWxlLmhlaWdodCA9IDA7XHJcblx0XHRlbG0uc3R5bGUucGFkZGluZ1RvcCA9IDA7XHJcblx0XHRlbG0uc3R5bGUucGFkZGluZ0JvdHRvbSA9IDA7XHJcblx0XHRlbG0uc3R5bGUubWFyZ2luVG9wID0gMDtcclxuXHRcdGVsbS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAwO1xyXG5cdFx0ZWxtLm9mZnNldEhlaWdodDtcclxuXHRcdGVsbS5zdHlsZS5ib3hTaXppbmcgPSAnYm9yZGVyLWJveCc7XHJcblx0XHRlbG0uc3R5bGUudHJhbnNpdGlvblByb3BlcnR5ID0gXCJoZWlnaHQsIG1hcmdpbiwgcGFkZGluZ1wiO1xyXG5cdFx0ZWxtLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGR1cmF0aW9uICsgJ21zJztcclxuXHRcdGVsbS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xyXG5cdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLXRvcCcpO1xyXG5cdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLWJvdHRvbScpO1xyXG5cdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdtYXJnaW4tdG9wJyk7XHJcblx0XHRlbG0uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi1ib3R0b20nKTtcclxuXHRcdHdpbmRvdy5zZXRUaW1lb3V0KCAoKSA9PiB7XHJcblx0XHRcdGVsbS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnaGVpZ2h0Jyk7XHJcblx0XHRcdGVsbS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnb3ZlcmZsb3cnKTtcclxuXHRcdFx0ZWxtLnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLWR1cmF0aW9uJyk7XHJcblx0XHRcdGVsbS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbi1wcm9wZXJ0eScpO1xyXG5cdFx0XHRlbG0uY2xhc3NMaXN0LnJlbW92ZSgndHJhbnNpdGlvbmluZycpO1xyXG5cdFx0fSwgZHVyYXRpb24pO1xyXG5cdH1cclxufTtcclxuXHJcbnZhciBzbGlkZVRvZ2dsZSA9IGZ1bmN0aW9uKGVsbSwgZHVyYXRpb24gPSBhcHAuYW5pbWF0aW9uLnNwZWVkKSB7XHJcblx0aWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsbSkuZGlzcGxheSA9PT0gJ25vbmUnKSB7XHJcblx0XHRyZXR1cm4gc2xpZGVEb3duKGVsbSwgZHVyYXRpb24pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm4gc2xpZGVVcChlbG0sIGR1cmF0aW9uKTtcclxuXHR9XHJcbn07XHJcblxyXG52YXIgc2V0Q29va2llID0gZnVuY3Rpb24oY29va2llTmFtZSwgY29va2llVmFsdWUpIHtcclxuXHR2YXIgbm93ID0gbmV3IERhdGUoKTtcclxuICB2YXIgdGltZSA9IG5vdy5nZXRUaW1lKCk7XHJcbiAgdmFyIGV4cGlyZVRpbWUgPSB0aW1lICsgMTAwMCozNjAwMDtcclxuICBub3cuc2V0VGltZShleHBpcmVUaW1lKTtcclxuICBkb2N1bWVudC5jb29raWUgPSBjb29raWVOYW1lICsgJz0nKyBjb29raWVWYWx1ZSArJztleHBpcmVzPScrbm93LnRvVVRDU3RyaW5nKCkrJztwYXRoPS8nO1xyXG59O1xyXG5cclxudmFyIGdldENvb2tpZSA9IGZ1bmN0aW9uKGNvb2tpZU5hbWUpIHtcclxuICBsZXQgbmFtZSA9IGNvb2tpZU5hbWUgKyBcIj1cIjtcclxuICBsZXQgZGVjb2RlZENvb2tpZSA9IGRlY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5jb29raWUpO1xyXG4gIGxldCBjYSA9IGRlY29kZWRDb29raWUuc3BsaXQoJzsnKTtcclxuICBmb3IobGV0IGkgPSAwOyBpIDxjYS5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IGMgPSBjYVtpXTtcclxuICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PSAnICcpIHtcclxuICAgICAgYyA9IGMuc3Vic3RyaW5nKDEpO1xyXG4gICAgfVxyXG4gICAgaWYgKGMuaW5kZXhPZihuYW1lKSA9PSAwKSB7XHJcbiAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgYy5sZW5ndGgpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gXCJcIjtcclxufTtcclxuXHJcblxyXG4vKiAwMi4gSGFuZGxlIFNjcm9sbGJhclxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZVNjcm9sbGJhciA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdFxyXG5cdHZhciBlbG1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnWycrIGFwcC5zY3JvbGxCYXIuYXR0ciArJ10nKTtcclxuXHRcdFxyXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZWxtcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0Z2VuZXJhdGVTY3JvbGxiYXIoZWxtc1tpXSlcclxuXHR9XHJcbn07XHJcbnZhciBnZW5lcmF0ZVNjcm9sbGJhciA9IGZ1bmN0aW9uKGVsbSkge1xyXG4gIFwidXNlIHN0cmljdFwiO1xyXG5cdFxyXG5cdGlmIChlbG0uc2Nyb2xsYmFySW5pdCB8fCAoYXBwLmlzTW9iaWxlICYmIGVsbS5nZXRBdHRyaWJ1dGUoYXBwLnNjcm9sbEJhci5za2lwTW9iaWxlQXR0cikpKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdHZhciBkYXRhSGVpZ2h0ID0gKCFlbG0uZ2V0QXR0cmlidXRlKGFwcC5zY3JvbGxCYXIuaGVpZ2h0QXR0cikpID8gZWxtLm9mZnNldEhlaWdodCA6IGVsbS5nZXRBdHRyaWJ1dGUoYXBwLnNjcm9sbEJhci5oZWlnaHRBdHRyKTtcclxuXHRcclxuXHRlbG0uc3R5bGUuaGVpZ2h0ID0gZGF0YUhlaWdodDtcclxuXHRlbG0uc2Nyb2xsYmFySW5pdCA9IHRydWU7XHJcblx0XHJcblx0aWYoYXBwLmlzTW9iaWxlIHx8ICFQZXJmZWN0U2Nyb2xsYmFyKSB7XHJcblx0XHRlbG0uc3R5bGUub3ZlcmZsb3dYID0gJ3Njcm9sbCc7XHJcblx0fSBlbHNlIHtcclxuXHRcdHZhciBkYXRhV2hlZWxQcm9wYWdhdGlvbiA9IChlbG0uZ2V0QXR0cmlidXRlKGFwcC5zY3JvbGxCYXIud2hlZWxQcm9wYWdhdGlvbkF0dHIpKSA/IGVsbS5nZXRBdHRyaWJ1dGUoYXBwLnNjcm9sbEJhci53aGVlbFByb3BhZ2F0aW9uQXR0cikgOiBmYWxzZTtcclxuXHRcdFxyXG5cdFx0aWYgKFBlcmZlY3RTY3JvbGxiYXIpIHtcclxuXHRcdFx0aWYgKGVsbS5jbG9zZXN0KCcuJysgYXBwLnNpZGViYXIuY2xhc3MgKSkge1xyXG5cdFx0XHRcdGFwcC5zaWRlYmFyLnNjcm9sbEJhckRvbSA9IG5ldyBQZXJmZWN0U2Nyb2xsYmFyKGVsbSwge1xyXG5cdFx0XHRcdFx0d2hlZWxQcm9wYWdhdGlvbjogZGF0YVdoZWVsUHJvcGFnYXRpb25cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRuZXcgUGVyZmVjdFNjcm9sbGJhcihlbG0sIHtcclxuXHRcdFx0XHRcdHdoZWVsUHJvcGFnYXRpb246IGRhdGFXaGVlbFByb3BhZ2F0aW9uXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG5cclxuLyogMDMuIEhhbmRsZSBTaWRlYmFyIE1lbnVcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVTaWRlYmFyTWVudVRvZ2dsZSA9IGZ1bmN0aW9uKG1lbnVzKSB7XHJcblx0bWVudXMubWFwKGZ1bmN0aW9uKG1lbnUpIHtcclxuXHRcdG1lbnUub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIHRhcmdldCA9IHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLnNpZGViYXIubWluaWZ5LnRvZ2dsZWRDbGFzcykpIHtcclxuXHRcdFx0XHRzbGlkZVRvZ2dsZSh0YXJnZXQpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdG1lbnVzLm1hcChmdW5jdGlvbihtKSB7XHJcblx0XHRcdFx0XHR2YXIgb3RoZXJUYXJnZXQgPSBtLm5leHRFbGVtZW50U2libGluZztcclxuXHRcdFx0XHRcdGlmIChvdGhlclRhcmdldCAhPT0gdGFyZ2V0KSB7XHJcblx0XHRcdFx0XHRcdHNsaWRlVXAob3RoZXJUYXJnZXQpO1xyXG5cdFx0XHRcdFx0XHRvdGhlclRhcmdldC5jbG9zZXN0KCcuJysgYXBwLnNpZGViYXIubWVudUl0ZW1DbGFzcykuY2xhc3NMaXN0LnJlbW92ZShhcHAuc2lkZWJhci5tZW51RXhwYW5kQ2xhc3MpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciB0YXJnZXRFbG0gPSB0YXJnZXQuY2xvc2VzdCgnLicrIGFwcC5zaWRlYmFyLm1lbnVJdGVtQ2xhc3MpO1xyXG5cdFx0XHRcdGlmICh0YXJnZXRFbG0uY2xhc3NMaXN0LmNvbnRhaW5zKGFwcC5zaWRlYmFyLm1lbnVFeHBhbmRDbGFzcykpIHtcclxuXHRcdFx0XHRcdHRhcmdldEVsbS5jbGFzc0xpc3QucmVtb3ZlKGFwcC5zaWRlYmFyLm1lbnVFeHBhbmRDbGFzcyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRhcmdldEVsbS5jbGFzc0xpc3QuYWRkKGFwcC5zaWRlYmFyLm1lbnVFeHBhbmRDbGFzcyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcbnZhciBoYW5kbGVTaWRlYmFyTWVudSA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdFxyXG5cdHZhciBtZW51cyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnIC4nKyBhcHAuc2lkZWJhci5tZW51Q2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudUl0ZW1DbGFzcyArJy4nKyBhcHAuc2lkZWJhci5tZW51SXRlbUhhc1N1YkNsYXNzICsnID4gLicrIGFwcC5zaWRlYmFyLm1lbnVMaW5rQ2xhc3MgKycnKSk7XHJcblx0aGFuZGxlU2lkZWJhck1lbnVUb2dnbGUobWVudXMpO1xyXG5cdFxyXG5cdHZhciBtZW51cyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnIC4nKyBhcHAuc2lkZWJhci5tZW51Q2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudUl0ZW1DbGFzcyArJy4nKyBhcHAuc2lkZWJhci5tZW51SXRlbUhhc1N1YkNsYXNzICsnIC4nKyBhcHAuc2lkZWJhci5tZW51U3VibWVudUNsYXNzICsnIC4nKyBhcHAuc2lkZWJhci5tZW51SXRlbUNsYXNzICsnLicrIGFwcC5zaWRlYmFyLm1lbnVJdGVtSGFzU3ViQ2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudUxpbmtDbGFzcyArJycpKTtcclxuXHRoYW5kbGVTaWRlYmFyTWVudVRvZ2dsZShtZW51cyk7XHJcbn07XHJcblxyXG5cclxuLyogMDQuIEhhbmRsZSBTaWRlYmFyIFNjcm9sbCBNZW1vcnlcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVTaWRlYmFyU2Nyb2xsTWVtb3J5ID0gZnVuY3Rpb24oKSB7XHJcblx0aWYgKCFhcHAuaXNNb2JpbGUpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGlmICh0eXBlb2YoU3RvcmFnZSkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZihsb2NhbFN0b3JhZ2UpICE9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0XHRcdHZhciBlbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLnNpZGViYXIuY2xhc3MgKycgWycrIGFwcC5zY3JvbGxCYXIuYXR0ciArJ10nKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZWxtKSB7XHJcblx0XHRcdFx0XHRlbG0ub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oYXBwLnNpZGViYXIuc2Nyb2xsQmFyLmxvY2FsU3RvcmFnZSwgdGhpcy5zY3JvbGxUb3ApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dmFyIGRlZmF1bHRTY3JvbGwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShhcHAuc2lkZWJhci5zY3JvbGxCYXIubG9jYWxTdG9yYWdlKTtcclxuXHRcdFx0XHRcdGlmIChkZWZhdWx0U2Nyb2xsKSB7XHJcblx0XHRcdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAuc2lkZWJhci5jbGFzcyArJyBbJysgYXBwLnNjcm9sbEJhci5hdHRyICsnXScpLnNjcm9sbFRvcCA9IGRlZmF1bHRTY3JvbGw7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuXHJcbi8qIDA0LiBIYW5kbGUgU2lkZWJhciBNaW5pZnlcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVTaWRlYmFyTWluaWZ5ID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGVsbXMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1snKyBhcHAuc2lkZWJhci5taW5pZnkudG9nZ2xlQXR0ciArJ10nKSk7XHJcblx0ZWxtcy5tYXAoZnVuY3Rpb24oZWxtKSB7XHJcblx0XHRlbG0ub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHJcblx0XHRcdHZhciB0YXJnZXRFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLmNsYXNzKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICh0YXJnZXRFbG0pIHtcclxuXHRcdFx0XHRpZiAodGFyZ2V0RWxtLmNsYXNzTGlzdC5jb250YWlucyhhcHAuc2lkZWJhci5taW5pZnkudG9nZ2xlZENsYXNzKSkge1xyXG5cdFx0XHRcdFx0dGFyZ2V0RWxtLmNsYXNzTGlzdC5yZW1vdmUoYXBwLnNpZGViYXIubWluaWZ5LnRvZ2dsZWRDbGFzcyk7XHJcblx0XHRcdFx0XHRsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShhcHAuc2lkZWJhci5taW5pZnkubG9jYWxTdG9yYWdlKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGFyZ2V0RWxtLmNsYXNzTGlzdC5hZGQoYXBwLnNpZGViYXIubWluaWZ5LnRvZ2dsZWRDbGFzcyk7XHJcblx0XHRcdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShhcHAuc2lkZWJhci5taW5pZnkubG9jYWxTdG9yYWdlLCB0cnVlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fSk7XHJcblx0XHJcblx0aWYgKHR5cGVvZihTdG9yYWdlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdGlmIChsb2NhbFN0b3JhZ2VbYXBwLnNpZGViYXIubWluaWZ5LmxvY2FsU3RvcmFnZV0pIHtcclxuXHRcdFx0dmFyIHRhcmdldEVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAuY2xhc3MpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHRhcmdldEVsbSkge1xyXG5cdFx0XHRcdHRhcmdldEVsbS5jbGFzc0xpc3QuYWRkKGFwcC5zaWRlYmFyLm1pbmlmeS50b2dnbGVkQ2xhc3MpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG52YXIgaGFuZGxlU2lkZWJhck1vYmlsZVRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBlbG1zID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJysgYXBwLnNpZGViYXIubW9iaWxlLnRvZ2dsZUF0dHIgKyddJykpO1xyXG5cdFxyXG5cdGVsbXMubWFwKGZ1bmN0aW9uKGVsbSkge1xyXG5cdFx0ZWxtLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHJcblx0XHRcdHZhciB0YXJnZXRFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLmNsYXNzKVxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHRhcmdldEVsbSkge1xyXG5cdFx0XHRcdHRhcmdldEVsbS5jbGFzc0xpc3QucmVtb3ZlKGFwcC5zaWRlYmFyLm1vYmlsZS5jbG9zZWRDbGFzcyk7XHJcblx0XHRcdFx0dGFyZ2V0RWxtLmNsYXNzTGlzdC5hZGQoYXBwLnNpZGViYXIubW9iaWxlLnRvZ2dsZWRDbGFzcyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fSk7XHJcbn07XHJcbnZhciBoYW5kbGVTaWRlYmFyTW9iaWxlRGlzbWlzcyA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBlbG1zID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJysgYXBwLnNpZGViYXIubW9iaWxlLmRpc21pc3NBdHRyICsnXScpKTtcclxuXHRcclxuXHRlbG1zLm1hcChmdW5jdGlvbihlbG0pIHtcclxuXHRcdGVsbS5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgdGFyZ2V0RWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicrIGFwcC5jbGFzcylcclxuXHRcdFx0XHJcblx0XHRcdGlmICh0YXJnZXRFbG0pIHtcclxuXHRcdFx0XHR0YXJnZXRFbG0uY2xhc3NMaXN0LnJlbW92ZShhcHAuc2lkZWJhci5tb2JpbGUudG9nZ2xlZENsYXNzKTtcclxuXHRcdFx0XHR0YXJnZXRFbG0uY2xhc3NMaXN0LmFkZChhcHAuc2lkZWJhci5tb2JpbGUuY2xvc2VkQ2xhc3MpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR0YXJnZXRFbG0uY2xhc3NMaXN0LnJlbW92ZShhcHAuc2lkZWJhci5tb2JpbGUuY2xvc2VkQ2xhc3MpO1xyXG5cdFx0XHRcdH0sIGFwcC5hbmltYXRpb24uc3BlZWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH0pO1xyXG59O1xyXG5cclxuXHJcbi8qIDA1LiBIYW5kbGUgU2lkZWJhciBNaW5pZnkgRmxvYXQgTWVudVxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZUdldEhpZGRlbk1lbnVIZWlnaHQgPSBmdW5jdGlvbihlbG0pIHtcclxuXHRlbG0uc2V0QXR0cmlidXRlKCdzdHlsZScsICdwb3NpdGlvbjogYWJzb2x1dGU7IHZpc2liaWxpdHk6IGhpZGRlbjsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudCcpO1xyXG5cdHZhciB0YXJnZXRIZWlnaHQgID0gZWxtLmNsaWVudEhlaWdodDtcclxuXHRlbG0ucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xyXG5cdHJldHVybiB0YXJnZXRIZWlnaHQ7XHJcbn1cclxudmFyIGhhbmRsZVNpZGViYXJNaW5pZnlGbG9hdE1lbnVDbGljayA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBlbG1zID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJysgYXBwLmZsb2F0U3VibWVudS5jbGFzcyArJyAuJysgYXBwLnNpZGViYXIubWVudUl0ZW1DbGFzcyArJy4nKyBhcHAuc2lkZWJhci5tZW51SXRlbUhhc1N1YkNsYXNzICsnID4gLicrIGFwcC5zaWRlYmFyLm1lbnVMaW5rQ2xhc3MpKTtcclxuXHRpZiAoZWxtcykge1xyXG5cdFx0ZWxtcy5tYXAoZnVuY3Rpb24oZWxtKSB7XHJcblx0XHRcdGVsbS5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR2YXIgdGFyZ2V0SXRlbSA9IHRoaXMuY2xvc2VzdCgnLicgKyBhcHAuc2lkZWJhci5tZW51SXRlbUNsYXNzKTtcclxuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gdGFyZ2V0SXRlbS5xdWVyeVNlbGVjdG9yKCcuJyArIGFwcC5zaWRlYmFyLm1lbnVTdWJtZW51Q2xhc3MpO1xyXG5cdFx0XHRcdHZhciB0YXJnZXRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGFyZ2V0KTtcclxuXHRcdFx0XHR2YXIgY2xvc2UgPSAodGFyZ2V0U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnZGlzcGxheScpICE9ICdub25lJykgPyB0cnVlIDogZmFsc2U7XHJcblx0XHRcdFx0dmFyIGV4cGFuZCA9ICh0YXJnZXRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdkaXNwbGF5JykgIT0gJ25vbmUnKSA/IGZhbHNlIDogdHJ1ZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRzbGlkZVRvZ2dsZSh0YXJnZXQpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBsb29wSGVpZ2h0ID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR2YXIgdGFyZ2V0TWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXBwLmZsb2F0U3VibWVudS5pZCk7XHJcblx0XHRcdFx0XHR2YXIgdGFyZ2V0TWVudUFycm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhcHAuZmxvYXRTdWJtZW51LmFycm93LmlkKTtcclxuXHRcdFx0XHRcdHZhciB0YXJnZXRNZW51TGluZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXBwLmZsb2F0U3VibWVudS5saW5lLmlkKTtcclxuXHRcdFx0XHRcdHZhciB0YXJnZXRIZWlnaHQgPSB0YXJnZXRNZW51LmNsaWVudEhlaWdodDtcclxuXHRcdFx0XHRcdHZhciB0YXJnZXRPZmZzZXQgPSB0YXJnZXRNZW51LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cdFx0XHRcdFx0dmFyIHRhcmdldE9yaVRvcCA9IHRhcmdldE1lbnUuZ2V0QXR0cmlidXRlKCdkYXRhLW9mZnNldC10b3AnKTtcclxuXHRcdFx0XHRcdHZhciB0YXJnZXRNZW51VG9wID0gdGFyZ2V0TWVudS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWVudS1vZmZzZXQtdG9wJyk7XHJcblx0XHRcdFx0XHR2YXIgdGFyZ2V0VG9wIFx0ID0gdGFyZ2V0T2Zmc2V0LnRvcDtcclxuXHRcdFx0XHRcdHZhciB3aW5kb3dIZWlnaHQgPSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDtcclxuXHRcdFx0XHRcdGlmIChjbG9zZSkge1xyXG5cdFx0XHRcdFx0XHRpZiAodGFyZ2V0VG9wID4gdGFyZ2V0T3JpVG9wKSB7XHJcblx0XHRcdFx0XHRcdFx0dGFyZ2V0VG9wID0gKHRhcmdldFRvcCA+IHRhcmdldE9yaVRvcCkgPyB0YXJnZXRPcmlUb3AgOiB0YXJnZXRUb3A7XHJcblx0XHRcdFx0XHRcdFx0dGFyZ2V0TWVudS5zdHlsZS50b3AgPSB0YXJnZXRUb3AgKyAncHgnO1xyXG5cdFx0XHRcdFx0XHRcdHRhcmdldE1lbnUuc3R5bGUuYm90dG9tID0gJ2F1dG8nO1xyXG5cdFx0XHRcdFx0XHRcdHRhcmdldE1lbnVBcnJvdy5zdHlsZS50b3AgPSAnMjBweCc7XHJcblx0XHRcdFx0XHRcdFx0dGFyZ2V0TWVudUFycm93LnN0eWxlLmJvdHRvbSA9ICdhdXRvJztcclxuXHRcdFx0XHRcdFx0XHR0YXJnZXRNZW51TGluZS5zdHlsZS50b3AgPSAnMjBweCc7XHJcblx0XHRcdFx0XHRcdFx0dGFyZ2V0TWVudUxpbmUuc3R5bGUuYm90dG9tID0gJ2F1dG8nO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoZXhwYW5kKSB7XHJcblx0XHRcdFx0XHRcdGlmICgod2luZG93SGVpZ2h0IC0gdGFyZ2V0VG9wKSA8IHRhcmdldEhlaWdodCkge1xyXG5cdFx0XHRcdFx0XHRcdHZhciBhcnJvd0JvdHRvbSA9ICh3aW5kb3dIZWlnaHQgLSB0YXJnZXRNZW51VG9wKSAtIDIyO1xyXG5cdFx0XHRcdFx0XHRcdHRhcmdldE1lbnUuc3R5bGUudG9wID0gJ2F1dG8nO1xyXG5cdFx0XHRcdFx0XHRcdHRhcmdldE1lbnUuc3R5bGUuYm90dG9tID0gMDtcclxuXHRcdFx0XHRcdFx0XHR0YXJnZXRNZW51QXJyb3cuc3R5bGUudG9wID0gJ2F1dG8nO1xyXG5cdFx0XHRcdFx0XHRcdHRhcmdldE1lbnVBcnJvdy5zdHlsZS5ib3R0b20gPSBhcnJvd0JvdHRvbSArICdweCc7XHJcblx0XHRcdFx0XHRcdFx0dGFyZ2V0TWVudUxpbmUuc3R5bGUudG9wID0gJzIwcHgnO1xyXG5cdFx0XHRcdFx0XHRcdHRhcmdldE1lbnVMaW5lLnN0eWxlLmJvdHRvbSA9IGFycm93Qm90dG9tICsgJ3B4JztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR2YXIgZmxvYXRTdWJtZW51RWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhcHAuZmxvYXRTdWJtZW51LmlkICsgJyAuJysgYXBwLmZsb2F0U3VibWVudS5jbGFzcyk7XHJcblx0XHRcdFx0XHRcdGlmICh0YXJnZXRIZWlnaHQgPiB3aW5kb3dIZWlnaHQpIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoZmxvYXRTdWJtZW51RWxtKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR2YXIgc3BsaXRDbGFzcyA9IChhcHAuZmxvYXRTdWJtZW51Lm92ZXJmbG93LmNsYXNzKS5zcGxpdCgnICcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzcGxpdENsYXNzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGZsb2F0U3VibWVudUVsbS5jbGFzc0xpc3QuYWRkKHNwbGl0Q2xhc3NbaV0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIDEpO1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRjbGVhckludGVydmFsKGxvb3BIZWlnaHQpO1xyXG5cdFx0XHRcdH0sIGFwcC5hbmltYXRpb24uc3BlZWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxudmFyIGhhbmRsZVNpZGViYXJNaW5pZnlGbG9hdE1lbnUgPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgZWxtcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBhcHAuc2lkZWJhci5jbGFzcyArICcgLicrIGFwcC5zaWRlYmFyLm1lbnVDbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51SXRlbUNsYXNzICsnLicrIGFwcC5zaWRlYmFyLm1lbnVJdGVtSGFzU3ViQ2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudUxpbmtDbGFzcyArJycpKTtcclxuXHRpZiAoZWxtcykge1xyXG5cdFx0ZWxtcy5tYXAoZnVuY3Rpb24oZWxtKSB7XHJcblx0XHRcdGVsbS5vbm1vdXNlZW50ZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgYXBwRWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBhcHAuY2xhc3MpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChhcHBFbG0gJiYgYXBwRWxtLmNsYXNzTGlzdC5jb250YWlucyhhcHAuc2lkZWJhci5taW5pZnkudG9nZ2xlZENsYXNzKSkge1xyXG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KGFwcC5mbG9hdFN1Ym1lbnUudGltZW91dCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciB0YXJnZXRNZW51ID0gdGhpcy5jbG9zZXN0KCcuJysgYXBwLnNpZGViYXIubWVudUl0ZW1DbGFzcykucXVlcnlTZWxlY3RvcignLicgKyBhcHAuc2lkZWJhci5tZW51U3VibWVudUNsYXNzKTtcclxuXHRcdFx0XHRcdGlmIChhcHAuZmxvYXRTdWJtZW51LmRvbSA9PSB0aGlzICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXBwLmZsb2F0U3VibWVudS5jbGFzcykpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YXBwLmZsb2F0U3VibWVudS5kb20gPSB0aGlzO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dmFyIHRhcmdldE1lbnVIdG1sID0gdGFyZ2V0TWVudS5pbm5lckhUTUw7XHJcblx0XHRcdFx0XHRpZiAodGFyZ2V0TWVudUh0bWwpIHtcclxuXHRcdFx0XHRcdFx0dmFyIGJvZHlTdHlsZSAgICAgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpO1xyXG5cdFx0XHRcdFx0XHR2YXIgc2lkZWJhck9mZnNldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAuc2lkZWJhci5jbGFzcykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHRcdFx0XHRcdHZhciBzaWRlYmFyV2lkdGggID0gcGFyc2VJbnQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicrIGFwcC5zaWRlYmFyLmNsYXNzKS5jbGllbnRXaWR0aCk7XHJcblx0XHRcdFx0XHRcdHZhciBzaWRlYmFyWCAgICAgID0gKGJvZHlTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdkaXJlY3Rpb24nKSAhPSAncnRsJykgPyAoc2lkZWJhck9mZnNldC5sZWZ0ICsgc2lkZWJhcldpZHRoKSA6IChkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIC0gc2lkZWJhck9mZnNldC5sZWZ0KTtcclxuXHRcdFx0XHRcdFx0dmFyIHRhcmdldEhlaWdodCAgPSBoYW5kbGVHZXRIaWRkZW5NZW51SGVpZ2h0KHRhcmdldE1lbnUpO1xyXG5cdFx0XHRcdFx0XHR2YXIgdGFyZ2V0T2Zmc2V0ICA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHRcdFx0XHRcdHZhciB0YXJnZXRUb3AgICAgID0gdGFyZ2V0T2Zmc2V0LnRvcDtcclxuXHRcdFx0XHRcdFx0dmFyIHRhcmdldExlZnQgICAgPSAoYm9keVN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2RpcmVjdGlvbicpICE9ICdydGwnKSA/IHNpZGViYXJYIDogJ2F1dG8nO1xyXG5cdFx0XHRcdFx0XHR2YXIgdGFyZ2V0UmlnaHQgICA9IChib2R5U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnZGlyZWN0aW9uJykgIT0gJ3J0bCcpID8gJ2F1dG8nIDogc2lkZWJhclg7XHJcblx0XHRcdFx0XHRcdHZhciB3aW5kb3dIZWlnaHQgID0gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnKyBhcHAuZmxvYXRTdWJtZW51LmlkKSkge1xyXG5cdFx0XHRcdFx0XHRcdHZhciBvdmVyZmxvd0NsYXNzID0gJyc7XHJcblx0XHRcdFx0XHRcdFx0aWYgKHRhcmdldEhlaWdodCA+IHdpbmRvd0hlaWdodCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0b3ZlcmZsb3dDbGFzcyA9IGFwcC5mbG9hdFN1Ym1lbnUub3ZlcmZsb3cuY2xhc3M7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdHZhciBodG1sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0XHRcdFx0aHRtbC5zZXRBdHRyaWJ1dGUoJ2lkJywgYXBwLmZsb2F0U3VibWVudS5pZCk7XHJcblx0XHRcdFx0XHRcdFx0aHRtbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgYXBwLmZsb2F0U3VibWVudS5jbGFzcyk7XHJcblx0XHRcdFx0XHRcdFx0aHRtbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtb2Zmc2V0LXRvcCcsIHRhcmdldFRvcCk7XHJcblx0XHRcdFx0XHRcdFx0aHRtbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVudS1vZmZzZXQtdG9wJywgdGFyZ2V0VG9wKTtcclxuXHRcdFx0XHRcdFx0XHRodG1sLmlubmVySFRNTCA9ICcnK1xyXG5cdFx0XHRcdFx0XHRcdCdcdDxkaXYgY2xhc3M9XCInKyBhcHAuZmxvYXRTdWJtZW51LmNvbnRhaW5lci5jbGFzcyArJyAnKyBvdmVyZmxvd0NsYXNzICsnXCI+JysgdGFyZ2V0TWVudUh0bWwgKyAnPC9kaXY+JztcclxuXHRcdFx0XHRcdFx0XHRhcHBFbG0uYXBwZW5kQ2hpbGQoaHRtbCk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0dmFyIGVsbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFwcC5mbG9hdFN1Ym1lbnUuaWQpO1xyXG5cdFx0XHRcdFx0XHRcdGVsbS5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KGFwcC5mbG9hdFN1Ym1lbnUudGltZW91dCk7XHJcblx0XHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0XHRlbG0ub25tb3VzZW91dCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXBwLmZsb2F0U3VibWVudS50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnKyBhcHAuZmxvYXRTdWJtZW51LmlkKS5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0sIGFwcC5hbmltYXRpb24uc3BlZWQpO1xyXG5cdFx0XHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0dmFyIGZsb2F0U3VibWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnKyBhcHAuZmxvYXRTdWJtZW51LmlkKTtcclxuXHRcdFx0XHRcdFx0XHR2YXIgZmxvYXRTdWJtZW51RWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycrIGFwcC5mbG9hdFN1Ym1lbnUuaWQgKyAnIC4nKyBhcHAuZmxvYXRTdWJtZW51LmNvbnRhaW5lci5jbGFzcyk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0aWYgKHRhcmdldEhlaWdodCA+IHdpbmRvd0hlaWdodCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGZsb2F0U3VibWVudUVsbSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgc3BsaXRDbGFzcyA9IChhcHAuZmxvYXRTdWJtZW51Lm92ZXJmbG93LmNsYXNzKS5zcGxpdCgnICcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNwbGl0Q2xhc3MubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRmbG9hdFN1Ym1lbnVFbG0uY2xhc3NMaXN0LmFkZChzcGxpdENsYXNzW2ldKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRmbG9hdFN1Ym1lbnUuc2V0QXR0cmlidXRlKCdkYXRhLW9mZnNldC10b3AnLCB0YXJnZXRUb3ApO1xyXG5cdFx0XHRcdFx0XHRcdGZsb2F0U3VibWVudS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWVudS1vZmZzZXQtdG9wJywgdGFyZ2V0VG9wKTtcclxuXHRcdFx0XHRcdFx0XHRmbG9hdFN1Ym1lbnVFbG0uaW5uZXJIVE1MID0gdGFyZ2V0TWVudUh0bWw7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dmFyIHRhcmdldEhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnKyBhcHAuZmxvYXRTdWJtZW51LmlkKS5jbGllbnRIZWlnaHQ7XHJcblx0XHRcdFx0XHRcdHZhciBmbG9hdFN1Ym1lbnVFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJysgYXBwLmZsb2F0U3VibWVudS5pZCk7XHJcblx0XHRcdFx0XHRcdGlmICgod2luZG93SGVpZ2h0IC0gdGFyZ2V0VG9wKSA+IHRhcmdldEhlaWdodCkge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChmbG9hdFN1Ym1lbnVFbG0pIHtcclxuXHRcdFx0XHRcdFx0XHRcdGZsb2F0U3VibWVudUVsbS5zdHlsZS50b3AgPSB0YXJnZXRUb3AgKyAncHgnO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZmxvYXRTdWJtZW51RWxtLnN0eWxlLmxlZnQgPSB0YXJnZXRMZWZ0ICsgJ3B4JztcclxuXHRcdFx0XHRcdFx0XHRcdGZsb2F0U3VibWVudUVsbS5zdHlsZS5ib3R0b20gPSAnYXV0byc7XHJcblx0XHRcdFx0XHRcdFx0XHRmbG9hdFN1Ym1lbnVFbG0uc3R5bGUucmlnaHQgPSB0YXJnZXRSaWdodCArICdweCc7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdHZhciBhcnJvd0JvdHRvbSA9ICh3aW5kb3dIZWlnaHQgLSB0YXJnZXRUb3ApIC0gMjE7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGZsb2F0U3VibWVudUVsbSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZmxvYXRTdWJtZW51RWxtLnN0eWxlLnRvcCA9ICdhdXRvJztcclxuXHRcdFx0XHRcdFx0XHRcdGZsb2F0U3VibWVudUVsbS5zdHlsZS5sZWZ0ID0gdGFyZ2V0TGVmdCArICdweCc7XHJcblx0XHRcdFx0XHRcdFx0XHRmbG9hdFN1Ym1lbnVFbG0uc3R5bGUuYm90dG9tID0gMDtcclxuXHRcdFx0XHRcdFx0XHRcdGZsb2F0U3VibWVudUVsbS5zdHlsZS5yaWdodCA9IHRhcmdldFJpZ2h0ICsgJ3B4JztcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aGFuZGxlU2lkZWJhck1pbmlmeUZsb2F0TWVudUNsaWNrKCk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJysgYXBwLmZsb2F0U3VibWVudS5pZCkucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRcdGFwcC5mbG9hdFN1Ym1lbnUuZG9tID0gJyc7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsbS5vbm1vdXNlbGVhdmUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgZWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBhcHAuY2xhc3MpO1xyXG5cdFx0XHRcdGlmIChlbG0gJiYgZWxtLmNsYXNzTGlzdC5jb250YWlucyhhcHAuc2lkZWJhci5taW5pZnkudG9nZ2xlZENsYXNzKSkge1xyXG5cdFx0XHRcdFx0YXBwLmZsb2F0U3VibWVudS50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnKyBhcHAuZmxvYXRTdWJtZW51LmlkKS5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdFx0YXBwLmZsb2F0U3VibWVudS5kb20gPSAnJztcclxuXHRcdFx0XHRcdH0sIDI1MCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn07XHJcblxyXG5cclxuLyogMDcuIEhhbmRsZSBDYXJkIC0gRXhwYW5kXHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG52YXIgaGFuZGxlQ2FyZEFjdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHRpZiAoYXBwLmNhcmQuZXhwYW5kLnN0YXR1cykge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHRhcHAuY2FyZC5leHBhbmRTdGF0dXMgPSB0cnVlO1xyXG5cclxuXHQvLyBleHBhbmRcclxuXHR2YXIgZXhwYW5kVG9nZ2xlckxpc3QgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1snKyBhcHAuY2FyZC5leHBhbmQudG9nZ2xlQXR0ciArJ10nKSk7XHJcblx0dmFyIGV4cGFuZFRvZ2dsZXJUb29sdGlwTGlzdCA9IGV4cGFuZFRvZ2dsZXJMaXN0Lm1hcChmdW5jdGlvbiAoZXhwYW5kVG9nZ2xlckVsKSB7XHJcblx0XHRleHBhbmRUb2dnbGVyRWwub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHJcblx0XHRcdHZhciB0YXJnZXQgPSB0aGlzLmNsb3Nlc3QoJy4nKyBhcHAuY2FyZC5jbGFzcyk7XHJcblx0XHRcdHZhciB0YXJnZXRDbGFzcyA9IGFwcC5jYXJkLmV4cGFuZC5jbGFzcztcclxuXHJcblx0XHRcdGlmIChkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyh0YXJnZXRDbGFzcykgJiYgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyh0YXJnZXRDbGFzcykpIHtcclxuXHRcdFx0XHR0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xyXG5cdFx0XHRcdHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKHRhcmdldENsYXNzKTtcclxuXHRcdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUodGFyZ2V0Q2xhc3MpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCh0YXJnZXRDbGFzcyk7XHJcblx0XHRcdFx0dGFyZ2V0LmNsYXNzTGlzdC5hZGQodGFyZ2V0Q2xhc3MpO1xyXG5cdFx0XHR9XHJcblx0XHRcclxuXHRcdFx0d2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdyZXNpemUnKSk7XHJcblx0XHR9O1xyXG5cdFxyXG5cdFx0cmV0dXJuIG5ldyBib290c3RyYXAuVG9vbHRpcChleHBhbmRUb2dnbGVyRWwsIHtcclxuXHRcdFx0dGl0bGU6IGFwcC5jYXJkLmV4cGFuZC50b29sdGlwVGV4dCxcclxuXHRcdFx0cGxhY2VtZW50OiAnYm90dG9tJyxcclxuXHRcdFx0dHJpZ2dlcjogJ2hvdmVyJyxcclxuXHRcdFx0Y29udGFpbmVyOiAnYm9keSdcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuXHJcbi8qIDA4LiBIYW5kbGUgVG9vbHRpcCAmIFBvcG92ZXIgQWN0aXZhdGlvblxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRlbFRvb2x0aXBQb3BvdmVyQWN0aXZhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciB0b29sdGlwVHJpZ2dlckxpc3QgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1snKyBhcHAudG9vbHRpcC50b2dnbGVBdHRyICsnXScpKVxyXG5cdHZhciB0b29sdGlwTGlzdCA9IHRvb2x0aXBUcmlnZ2VyTGlzdC5tYXAoZnVuY3Rpb24gKHRvb2x0aXBUcmlnZ2VyRWwpIHtcclxuXHRcdHJldHVybiBuZXcgYm9vdHN0cmFwLlRvb2x0aXAodG9vbHRpcFRyaWdnZXJFbCk7XHJcblx0fSk7XHJcblx0XHJcblx0dmFyIHBvcG92ZXJUcmlnZ2VyTGlzdCA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnWycrIGFwcC5wb3BvdmVyLnRvZ2dsZUF0dHIgKyddJykpXHJcblx0dmFyIHBvcG92ZXJMaXN0ID0gcG9wb3ZlclRyaWdnZXJMaXN0Lm1hcChmdW5jdGlvbiAocG9wb3ZlclRyaWdnZXJFbCkge1xyXG5cdFx0cmV0dXJuIG5ldyBib290c3RyYXAuUG9wb3Zlcihwb3BvdmVyVHJpZ2dlckVsKTtcclxuXHR9KTtcclxufTtcclxuXHJcblxyXG4vKiAwOS4gSGFuZGxlIFNjcm9sbCB0byBUb3AgQnV0dG9uIEFjdGl2YXRpb25cclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVTY3JvbGxUb1RvcEJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBlbG1UcmlnZ2VyTGlzdCA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnWycrIGFwcC5zY3JvbGxUb3BCdXR0b24udG9nZ2xlQXR0ciArJ10nKSk7XHJcblx0XHJcblx0ZG9jdW1lbnQub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBkb2MgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcblx0XHR2YXIgdG90YWxTY3JvbGwgPSAod2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvYy5zY3JvbGxUb3ApICAtIChkb2MuY2xpZW50VG9wIHx8IDApO1xyXG5cdFx0dmFyIGVsbUxpc3QgPSBlbG1UcmlnZ2VyTGlzdC5tYXAoZnVuY3Rpb24oZWxtKSB7XHJcblx0XHRcdGlmICh0b3RhbFNjcm9sbCA+PSAyMDApIHtcclxuXHRcdFx0XHRpZiAoIWVsbS5jbGFzc0xpc3QuY29udGFpbnMoYXBwLnNjcm9sbFRvcEJ1dHRvbi5zaG93Q2xhc3MpKSB7XHJcblx0XHRcdFx0XHRlbG0uY2xhc3NMaXN0LmFkZChhcHAuc2Nyb2xsVG9wQnV0dG9uLnNob3dDbGFzcyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGVsbS5jbGFzc0xpc3QucmVtb3ZlKGFwcC5zY3JvbGxUb3BCdXR0b24uc2hvd0NsYXNzKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdHZhciBlbG1MaXN0ID0gZWxtVHJpZ2dlckxpc3QubWFwKGZ1bmN0aW9uKGVsbSkge1xyXG5cdFx0ZWxtLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHJcblx0XHRcdHdpbmRvdy5zY3JvbGxUbyh7dG9wOiAwLCBiZWhhdmlvcjogJ3Ntb290aCd9KTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcblxyXG4vKiAxMS4gSGFuZGxlIFNjcm9sbCB0b1xyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZVNjcm9sbFRvID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGVsbVRyaWdnZXJMaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJysgYXBwLnNjcm9sbFRvLnRvZ2dsZUF0dHIgKyddJykpO1xyXG5cdHZhciBlbG1MaXN0ID0gZWxtVHJpZ2dlckxpc3QubWFwKGZ1bmN0aW9uKGVsbSkge1xyXG5cdFx0ZWxtLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFxyXG5cdFx0XHR2YXIgdGFyZ2V0QXR0ciA9IChlbG0uZ2V0QXR0cmlidXRlKGFwcC5zY3JvbGxUby50YXJnZXRBdHRyKSkgPyB0aGlzLmdldEF0dHJpYnV0ZShhcHAuc2Nyb2xsVG8udGFyZ2V0QXR0cikgOiB0aGlzLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xyXG5cdFx0XHR2YXIgdGFyZ2V0RWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0YXJnZXRBdHRyKVswXTtcclxuXHRcdFx0dmFyIHRhcmdldEhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nKyBhcHAuaGVhZGVyLmNsYXNzKVswXTtcclxuXHRcdFx0dmFyIHRhcmdldEhlaWdodCA9IHRhcmdldEhlYWRlci5vZmZzZXRIZWlnaHQ7XHJcblx0XHRcdGlmICh0YXJnZXRFbG0pIHtcclxuXHRcdFx0XHR2YXIgdGFyZ2V0VG9wID0gdGFyZ2V0RWxtLm9mZnNldFRvcCAtIHRhcmdldEhlaWdodCArIDM2O1xyXG5cdFx0XHRcdHdpbmRvdy5zY3JvbGxUbyh7dG9wOiB0YXJnZXRUb3AsIGJlaGF2aW9yOiAnc21vb3RoJ30pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcblxyXG5cclxuLyogMTIuIEhhbmRsZSBUaGVtZSBQYW5lbCBFeHBhbmRcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVUaGVtZVBhbmVsRXhwYW5kID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGVsbUxpc3QgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1snKyBhcHAudGhlbWVQYW5lbC50b2dnbGVBdHRyICsnXScpKTtcclxuXHRcclxuXHRlbG1MaXN0Lm1hcChmdW5jdGlvbihlbG0pIHtcclxuXHRcdGVsbS5vbmNsaWNrID0gZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgdGFyZ2V0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzKTtcclxuXHRcdFx0dmFyIHRhcmdldEV4cGFuZCA9IGZhbHNlO1xyXG5cdFx0XHJcblx0XHRcdGlmICh0YXJnZXRDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKGFwcC50aGVtZVBhbmVsLmFjdGl2ZUNsYXNzKSkge1xyXG5cdFx0XHRcdHRhcmdldENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKGFwcC50aGVtZVBhbmVsLmFjdGl2ZUNsYXNzKTtcclxuXHRcdFx0XHRzZXRDb29raWUoYXBwLnRoZW1lUGFuZWwuZXhwYW5kQ29va2llLCAnJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGFyZ2V0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoYXBwLnRoZW1lUGFuZWwuYWN0aXZlQ2xhc3MpO1xyXG5cdFx0XHRcdHNldENvb2tpZShhcHAudGhlbWVQYW5lbC5leHBhbmRDb29raWUsIGFwcC50aGVtZVBhbmVsLmV4cGFuZENvb2tpZVZhbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdFxyXG5cdGlmIChnZXRDb29raWUoYXBwLnRoZW1lUGFuZWwuZXhwYW5kQ29va2llKSAmJiBnZXRDb29raWUoYXBwLnRoZW1lUGFuZWwuZXhwYW5kQ29va2llKSA9PSBhcHAudGhlbWVQYW5lbC5leHBhbmRDb29raWVWYWx1ZSkge1xyXG5cdFx0dmFyIGVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1snKyBhcHAudGhlbWVQYW5lbC50b2dnbGVBdHRyICsnXScpO1xyXG5cdFx0aWYgKGVsbSkge1xyXG5cdFx0XHRlbG0uY2xpY2soKTtcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG5cclxuLyogMTMuIEhhbmRsZSBUaGVtZSBQYWdlIENvbnRyb2xcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVUaGVtZVBhZ2VDb250cm9sID0gZnVuY3Rpb24oKSB7XHJcblx0Ly8gVGhlbWUgQ2xpY2tcclxuXHR2YXIgZWxtcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicrIGFwcC50aGVtZVBhbmVsLnRoZW1lTGlzdC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0LnRvZ2dsZUF0dHIgKyddJykpO1xyXG5cdGVsbXMubWFwKGZ1bmN0aW9uKGVsbSkge1xyXG5cdFx0ZWxtLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHRhcmdldFRoZW1lQ2xhc3MgPSB0aGlzLmdldEF0dHJpYnV0ZShhcHAudGhlbWVQYW5lbC50aGVtZUxpc3QudG9nZ2xlQXR0cik7XHJcblx0XHRcdGZvciAodmFyIHggPSAwOyB4IDwgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QubGVuZ3RoOyB4KyspIHtcclxuXHRcdFx0XHR2YXIgdGFyZ2V0Q2xhc3MgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdFt4XTtcclxuXHRcdFx0XHRpZiAodGFyZ2V0Q2xhc3Muc2VhcmNoKCd0aGVtZS0nKSA+IC0xKSB7XHJcblx0XHRcdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUodGFyZ2V0Q2xhc3MpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAodGFyZ2V0VGhlbWVDbGFzcykge1xyXG5cdFx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCh0YXJnZXRUaGVtZUNsYXNzKTtcclxuXHRcdFx0fVxyXG5cdFx0XHJcblx0XHRcdHZhciB0b2dnbGVycyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicrIGFwcC50aGVtZVBhbmVsLnRoZW1lTGlzdC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0LnRvZ2dsZUF0dHIgKyddJykpO1xyXG5cdFx0XHR0b2dnbGVycy5tYXAoZnVuY3Rpb24odG9nZ2xlcikge1xyXG5cdFx0XHRcdGlmICh0b2dnbGVyICE9IGVsbSkge1xyXG5cdFx0XHRcdFx0dG9nZ2xlci5jbG9zZXN0KCdsaScpLmNsYXNzTGlzdC5yZW1vdmUoYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0LmFjdGl2ZUNsYXNzKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dG9nZ2xlci5jbG9zZXN0KCdsaScpLmNsYXNzTGlzdC5hZGQoYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0LmFjdGl2ZUNsYXNzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRzZXRDb29raWUoYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0LmNvb2tpZU5hbWUsIHRhcmdldFRoZW1lQ2xhc3MpO1xyXG5cdFx0XHRkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChhcHAudGhlbWVQYW5lbC50aGVtZUxpc3Qub25DaGFuZ2VFdmVudCkpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdFxyXG5cdC8vIFRoZW1lIENvb2tpZVxyXG5cdGlmIChnZXRDb29raWUoYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0LmNvb2tpZU5hbWUpICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAudGhlbWVQYW5lbC50aGVtZUxpc3QuY2xhc3MpKSB7XHJcblx0XHR2YXIgdGFyZ2V0RWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicrIGFwcC50aGVtZVBhbmVsLnRoZW1lTGlzdC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0LnRvZ2dsZUF0dHIgKyc9XCInKyBnZXRDb29raWUoYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0LmNvb2tpZU5hbWUpICsnXCJdJyk7XHJcblx0XHRpZiAodGFyZ2V0RWxtKSB7XHJcblx0XHRcdHRhcmdldEVsbS5jbGljaygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBEYXJrIE1vZGUgQ2xpY2tcclxuXHR2YXIgZWxtcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzICsnIFtuYW1lPVwiJysgYXBwLnRoZW1lUGFuZWwuZGFya01vZGUuaW5wdXROYW1lICsnXCJdJykpO1xyXG5cdGVsbXMubWFwKGZ1bmN0aW9uKGVsbSkge1xyXG5cdFx0ZWxtLm9uY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB0YXJnZXRDb29raWUgPSAnJztcclxuXHRcclxuXHRcdFx0aWYgKHRoaXMuY2hlY2tlZCkge1xyXG5cdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5jbGFzc0xpc3QuYWRkKGFwcC50aGVtZVBhbmVsLmRhcmtNb2RlLmNsYXNzKTtcclxuXHRcdFx0XHR0YXJnZXRDb29raWUgPSAnZGFyay1tb2RlJztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykuY2xhc3NMaXN0LnJlbW92ZShhcHAudGhlbWVQYW5lbC5kYXJrTW9kZS5jbGFzcyk7XHJcblx0XHRcdH1cclxuXHRcdFx0QXBwLmluaXRWYXJpYWJsZSgpO1xyXG5cdFx0XHRzZXRDb29raWUoYXBwLnRoZW1lUGFuZWwuZGFya01vZGUuY29va2llTmFtZSwgdGFyZ2V0Q29va2llKTtcclxuXHRcdFx0ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0Lm9uQ2hhbmdlRXZlbnQpKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRcclxuXHQvLyBEYXJrIE1vZGUgQ29va2llXHJcblx0aWYgKGdldENvb2tpZShhcHAudGhlbWVQYW5lbC5kYXJrTW9kZS5jb29raWVOYW1lKSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgW25hbWU9XCInKyBhcHAudGhlbWVQYW5lbC5kYXJrTW9kZS5pbnB1dE5hbWUgKydcIl0nKSkge1xyXG5cdFx0dmFyIGVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbbmFtZT1cIicrIGFwcC50aGVtZVBhbmVsLmRhcmtNb2RlLmlucHV0TmFtZSArJ1wiXScpO1xyXG5cdFx0aWYgKGVsbSkge1xyXG5cdFx0XHRlbG0uY2hlY2tlZCA9IHRydWU7XHJcblx0XHRcdGVsbS5vbmNoYW5nZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcblxyXG4vKiBBcHBsaWNhdGlvbiBDb250cm9sbGVyXHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG52YXIgQXBwID0gZnVuY3Rpb24gKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdFxyXG5cdHJldHVybiB7XHJcblx0XHQvL21haW4gZnVuY3Rpb25cclxuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dGhpcy5pbml0Q29tcG9uZW50KCk7XHJcblx0XHRcdHRoaXMuaW5pdFZhcmlhYmxlKCk7XHJcblx0XHRcdHRoaXMuaW5pdEhlYWRlcigpO1xyXG5cdFx0XHR0aGlzLmluaXRTaWRlYmFyKCk7XHJcblx0XHR9LFxyXG5cdFx0aW5pdFNpZGViYXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRoYW5kbGVTaWRlYmFyU2Nyb2xsTWVtb3J5KCk7XHJcblx0XHRcdGhhbmRsZVNpZGViYXJNaW5pZnlGbG9hdE1lbnUoKTtcclxuXHRcdFx0aGFuZGxlU2lkZWJhck1lbnUoKTtcclxuXHRcdFx0aGFuZGxlU2lkZWJhck1pbmlmeSgpO1xyXG5cdFx0XHRoYW5kbGVTaWRlYmFyTW9iaWxlVG9nZ2xlKCk7XHJcblx0XHRcdGhhbmRsZVNpZGViYXJNb2JpbGVEaXNtaXNzKCk7XHJcblx0XHR9LFxyXG5cdFx0aW5pdEhlYWRlcjogZnVuY3Rpb24oKSB7XHJcblx0XHR9LFxyXG5cdFx0aW5pdENvbXBvbmVudDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGhhbmRsZVNjcm9sbGJhcigpO1xyXG5cdFx0XHRoYW5kbGVDYXJkQWN0aW9uKCk7XHJcblx0XHRcdGhhbmRlbFRvb2x0aXBQb3BvdmVyQWN0aXZhdGlvbigpO1xyXG5cdFx0XHRoYW5kbGVTY3JvbGxUb1RvcEJ1dHRvbigpO1xyXG5cdFx0XHRoYW5kbGVTY3JvbGxUbygpO1xyXG5cdFx0XHRoYW5kbGVUaGVtZVBhbmVsRXhwYW5kKCk7XHJcblx0XHRcdGhhbmRsZVRoZW1lUGFnZUNvbnRyb2woKTtcclxuXHRcdH0sXHJcblx0XHRzY3JvbGxUb3A6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR3aW5kb3cuc2Nyb2xsVG8oe3RvcDogMCwgYmVoYXZpb3I6ICdzbW9vdGgnfSk7XHJcblx0XHR9LFxyXG5cdFx0Z2V0Q3NzVmFyaWFibGU6IGZ1bmN0aW9uKHZhcmlhYmxlKSB7XHJcblx0XHRcdHJldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKHZhcmlhYmxlKS50cmltKCk7XHJcblx0XHR9LFxyXG5cdFx0aW5pdFZhcmlhYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0YXBwLmNvbG9yLnRoZW1lICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1hcHAtdGhlbWUnKTtcclxuXHRcdFx0YXBwLmZvbnQuZmFtaWx5ICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ib2R5LWZvbnQtZmFtaWx5Jyk7XHJcblx0XHRcdGFwcC5mb250LnNpemUgICAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtYm9keS1mb250LXNpemUnKTtcclxuXHRcdFx0YXBwLmZvbnQud2VpZ2h0ICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ib2R5LWZvbnQtd2VpZ2h0Jyk7XHJcblx0XHRcdGFwcC5jb2xvci5jb21wb25lbnRDb2xvciA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYXBwLWNvbXBvbmVudC1jb2xvcicpO1xyXG5cdFx0XHRhcHAuY29sb3IuY29tcG9uZW50QmcgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWFwcC1jb21wb25lbnQtYmcnKTtcclxuXHRcdFx0YXBwLmNvbG9yLmRhcmsgICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1kYXJrJyk7XHJcblx0XHRcdGFwcC5jb2xvci5saWdodCAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtbGlnaHQnKTtcclxuXHRcdFx0YXBwLmNvbG9yLmJsdWUgICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ibHVlJyk7XHJcblx0XHRcdGFwcC5jb2xvci5pbmRpZ28gICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtaW5kaWdvJyk7XHJcblx0XHRcdGFwcC5jb2xvci5wdXJwbGUgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtcHVycGxlJyk7XHJcblx0XHRcdGFwcC5jb2xvci5waW5rICAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtcGluaycpO1xyXG5cdFx0XHRhcHAuY29sb3IucmVkICAgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLXJlZCcpO1xyXG5cdFx0XHRhcHAuY29sb3Iub3JhbmdlICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLW9yYW5nZScpO1xyXG5cdFx0XHRhcHAuY29sb3IueWVsbG93ICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLXllbGxvdycpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JlZW4gICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyZWVuJyk7XHJcblx0XHRcdGFwcC5jb2xvci5zdWNjZXNzICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtc3VjY2VzcycpO1xyXG5cdFx0XHRhcHAuY29sb3IudGVhbCAgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLXRlYWwnKTtcclxuXHRcdFx0YXBwLmNvbG9yLmN5YW4gICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1jeWFuJyk7XHJcblx0XHRcdGFwcC5jb2xvci53aGl0ZSAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtd2hpdGUnKTtcclxuXHRcdFx0YXBwLmNvbG9yLmdyYXkgICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5Jyk7XHJcblx0XHRcdGFwcC5jb2xvci5saW1lICAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtbGltZScpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTEwMCAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktMTAwJyk7XHJcblx0XHRcdGFwcC5jb2xvci5ncmF5MjAwICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS0yMDAnKTtcclxuXHRcdFx0YXBwLmNvbG9yLmdyYXkzMDAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTMwMCcpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTQwMCAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktNDAwJyk7XHJcblx0XHRcdGFwcC5jb2xvci5ncmF5NTAwICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS01MDAnKTtcclxuXHRcdFx0YXBwLmNvbG9yLmdyYXk2MDAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTYwMCcpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTcwMCAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktNzAwJyk7XHJcblx0XHRcdGFwcC5jb2xvci5ncmF5ODAwICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS04MDAnKTtcclxuXHRcdFx0YXBwLmNvbG9yLmdyYXk5MDAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTkwMCcpO1xyXG5cdFx0XHRhcHAuY29sb3IuYmxhY2sgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWJsYWNrJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRhcHAuY29sb3IudGhlbWVSZ2IgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWFwcC10aGVtZS1yZ2InKTtcclxuXHRcdFx0YXBwLmZvbnQuZmFtaWx5UmdiICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ib2R5LWZvbnQtZmFtaWx5LXJnYicpO1xyXG5cdFx0XHRhcHAuZm9udC5zaXplUmdiICAgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWJvZHktZm9udC1zaXplLXJnYicpO1xyXG5cdFx0XHRhcHAuZm9udC53ZWlnaHRSZ2IgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWJvZHktZm9udC13ZWlnaHQtcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5jb21wb25lbnRDb2xvclJnYiA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYXBwLWNvbXBvbmVudC1jb2xvci1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLmNvbXBvbmVudEJnUmdiICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1hcHAtY29tcG9uZW50LWJnLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZGFya1JnYiAgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWRhcmstcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5saWdodFJnYiAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtbGlnaHQtcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5ibHVlUmdiICAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtYmx1ZS1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLmluZGlnb1JnYiAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1pbmRpZ28tcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5wdXJwbGVSZ2IgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtcHVycGxlLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IucGlua1JnYiAgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLXBpbmstcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5yZWRSZ2IgICAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtcmVkLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3Iub3JhbmdlUmdiICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLW9yYW5nZS1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLnllbGxvd1JnYiAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy15ZWxsb3ctcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5ncmVlblJnYiAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JlZW4tcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5zdWNjZXNzUmdiICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtc3VjY2Vzcy1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLnRlYWxSZ2IgICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy10ZWFsLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuY3lhblJnYiAgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWN5YW4tcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci53aGl0ZVJnYiAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtd2hpdGUtcmdiJyk7XHJcblx0XHRcdGFwcC5jb2xvci5ncmF5UmdiICAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS1yZ2InKTtcclxuXHRcdFx0YXBwLmNvbG9yLmxpbWVSZ2IgICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1saW1lLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTEwMFJnYiAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktMTAwLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTIwMFJnYiAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktMjAwLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTMwMFJnYiAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktMzAwLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTQwMFJnYiAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktNDAwLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTUwMFJnYiAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktNTAwLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTYwMFJnYiAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktNjAwLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTcwMFJnYiAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktNzAwLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTgwMFJnYiAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktODAwLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuZ3JheTkwMFJnYiAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktOTAwLXJnYicpO1xyXG5cdFx0XHRhcHAuY29sb3IuYmxhY2tSZ2IgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWJsYWNrLXJnYicpO1xyXG5cdFx0fVxyXG5cdH07XHJcbn0oKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcclxuXHRBcHAuaW5pdCgpO1xyXG59KTsiXX0=
